<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Shell</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__sys__shell.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Shell<div class="ingroups"><a class="el" href="group__sys.html">System</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Simple shell interpreter.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Simple shell interpreter. </p>
<p>Access to the shell grants access to the system that may exercise any power the firmware can exercise. While some commands only provide limited access to the system, and it is best practice for commands to validate their input, there is no expectation of security of the system when an attacker gains access to the shell.</p>
<p>Enable the <code>shell</code> module e.g. by adding the following snippet to your applications <code>Makefile</code>.</p>
<div class="fragment"><div class="line">USEMODULE += shell</div></div><!-- fragment --><p>And run the shell using <a class="el" href="group__sys__shell.html#ga51ab5e366fa7797e8529071abd68f68b">shell_run_forever</a> e.g. from the <code>main</code> thread after everything is set up. This call will never return.</p>
<p>The commands <code>help</code> and <code>help_json</code> are builtins that print the list of available commands: The former prints a human readable table and is always available, the latter requires module <code>shell_builtin_cmd_help_json</code> to be used and will give the same info machine readable. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__sys__shell__commands"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell__commands.html">Shell commands</a></td></tr>
<tr class="memdesc:group__sys__shell__commands"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br />
<h1><a class="anchor" id="autotoc_md2214"></a>
Shell Commands</h1>
<br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__sys__shell__config"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell__config.html">Shell compile time configurations</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:shell_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8h.html">shell.h</a></td></tr>
<tr class="memdesc:shell_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shell interface definition. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structshell__command__t.html">shell_command_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single command in the list of the supported commands.  <a href="structshell__command__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structshell__command__xfa__t.html">shell_command_xfa_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single command in the list of the supported commands.  <a href="structshell__command__xfa__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac6ce9a12c394d101eb934286106ed2ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#gac6ce9a12c394d101eb934286106ed2ee">SHELL_DEFAULT_BUFSIZE</a>&#160;&#160;&#160;(128)</td></tr>
<tr class="memdesc:gac6ce9a12c394d101eb934286106ed2ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default shell buffer size (maximum line length shell can handle)  <a href="#gac6ce9a12c394d101eb934286106ed2ee">More...</a><br /></td></tr>
<tr class="separator:gac6ce9a12c394d101eb934286106ed2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafec93867eb7af5bedfe2dcfb8d8120e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#gaafec93867eb7af5bedfe2dcfb8d8120e">SHELL_COMMAND</a>(cmd,  help,  func)</td></tr>
<tr class="memdesc:gaafec93867eb7af5bedfe2dcfb8d8120e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define shell command.  <a href="#gaafec93867eb7af5bedfe2dcfb8d8120e">More...</a><br /></td></tr>
<tr class="separator:gaafec93867eb7af5bedfe2dcfb8d8120e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga6cf265eee7d4bf93b186d6aaadd659a5"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga6cf265eee7d4bf93b186d6aaadd659a5">shell_command_handler_t</a>) (int argc, char **argv)</td></tr>
<tr class="memdesc:ga6cf265eee7d4bf93b186d6aaadd659a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of a shell callback handler.  <a href="#ga6cf265eee7d4bf93b186d6aaadd659a5">More...</a><br /></td></tr>
<tr class="separator:ga6cf265eee7d4bf93b186d6aaadd659a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga169f80d22f314444b0a8b8efa6bc5fb9"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structshell__command__t.html">shell_command_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga169f80d22f314444b0a8b8efa6bc5fb9">shell_command_t</a></td></tr>
<tr class="memdesc:ga169f80d22f314444b0a8b8efa6bc5fb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single command in the list of the supported commands.  <a href="#ga169f80d22f314444b0a8b8efa6bc5fb9">More...</a><br /></td></tr>
<tr class="separator:ga169f80d22f314444b0a8b8efa6bc5fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga58012536a8c7a12b37cd82b0ffddbc47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga58012536a8c7a12b37cd82b0ffddbc47">shell_post_readline_hook</a> (void)</td></tr>
<tr class="memdesc:ga58012536a8c7a12b37cd82b0ffddbc47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional hook after readline has triggered.  <a href="#ga58012536a8c7a12b37cd82b0ffddbc47">More...</a><br /></td></tr>
<tr class="separator:ga58012536a8c7a12b37cd82b0ffddbc47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06b6793cabe83ec1e30db3bfcafa8ac5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga06b6793cabe83ec1e30db3bfcafa8ac5">shell_pre_command_hook</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:ga06b6793cabe83ec1e30db3bfcafa8ac5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional hook before shell command is called.  <a href="#ga06b6793cabe83ec1e30db3bfcafa8ac5">More...</a><br /></td></tr>
<tr class="separator:ga06b6793cabe83ec1e30db3bfcafa8ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80aaccb8dd5ee218b6dcae8175444afd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga80aaccb8dd5ee218b6dcae8175444afd">shell_post_command_hook</a> (int ret, int argc, char **argv)</td></tr>
<tr class="memdesc:ga80aaccb8dd5ee218b6dcae8175444afd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional hook after shell command is called.  <a href="#ga80aaccb8dd5ee218b6dcae8175444afd">More...</a><br /></td></tr>
<tr class="separator:ga80aaccb8dd5ee218b6dcae8175444afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d3d8dea426c6c5fa188479e53286aec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga3d3d8dea426c6c5fa188479e53286aec">shell_run_once</a> (const <a class="el" href="structshell__command__t.html">shell_command_t</a> *commands, char *line_buf, int len)</td></tr>
<tr class="memdesc:ga3d3d8dea426c6c5fa188479e53286aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a shell and exit once EOF is reached.  <a href="#ga3d3d8dea426c6c5fa188479e53286aec">More...</a><br /></td></tr>
<tr class="separator:ga3d3d8dea426c6c5fa188479e53286aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51ab5e366fa7797e8529071abd68f68b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga51ab5e366fa7797e8529071abd68f68b">shell_run_forever</a> (const <a class="el" href="structshell__command__t.html">shell_command_t</a> *commands, char *line_buf, int len)</td></tr>
<tr class="memdesc:ga51ab5e366fa7797e8529071abd68f68b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a shell and restart it if it exits.  <a href="#ga51ab5e366fa7797e8529071abd68f68b">More...</a><br /></td></tr>
<tr class="separator:ga51ab5e366fa7797e8529071abd68f68b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e7970d4823d1624837c9e7ddc6accf0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga6e7970d4823d1624837c9e7ddc6accf0">shell_run</a> (const <a class="el" href="structshell__command__t.html">shell_command_t</a> *commands, char *line_buf, int len)</td></tr>
<tr class="memdesc:ga6e7970d4823d1624837c9e7ddc6accf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back-porting alias for <a class="el" href="group__sys__shell.html#ga51ab5e366fa7797e8529071abd68f68b">shell_run_forever</a>.  <a href="#ga6e7970d4823d1624837c9e7ddc6accf0">More...</a><br /></td></tr>
<tr class="separator:ga6e7970d4823d1624837c9e7ddc6accf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cff0292efc7d2c7cad01708064a444e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga3cff0292efc7d2c7cad01708064a444e">shell_handle_input_line</a> (const <a class="el" href="structshell__command__t.html">shell_command_t</a> *commands, char *line)</td></tr>
<tr class="memdesc:ga3cff0292efc7d2c7cad01708064a444e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse and run a line of text as a shell command with arguments.  <a href="#ga3cff0292efc7d2c7cad01708064a444e">More...</a><br /></td></tr>
<tr class="separator:ga3cff0292efc7d2c7cad01708064a444e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9581ba9058c4dbcb09468055a83bcde6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__shell.html#ga9581ba9058c4dbcb09468055a83bcde6">shell_parse_file</a> (const <a class="el" href="structshell__command__t.html">shell_command_t</a> *commands, const char *filename, unsigned *line_nr)</td></tr>
<tr class="memdesc:ga9581ba9058c4dbcb09468055a83bcde6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read shell commands from a file and run them.  <a href="#ga9581ba9058c4dbcb09468055a83bcde6">More...</a><br /></td></tr>
<tr class="separator:ga9581ba9058c4dbcb09468055a83bcde6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaafec93867eb7af5bedfe2dcfb8d8120e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaafec93867eb7af5bedfe2dcfb8d8120e">&#9670;&nbsp;</a></span>SHELL_COMMAND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHELL_COMMAND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cmd, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">help, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="xfa_8h.html#a485e9df1d2f61fb38a2d7982496d7406">XFA_USE_CONST</a>(<a class="code" href="structshell__command__xfa__t.html">shell_command_xfa_t</a>, shell_commands_xfa_v2); \</div><div class="line">    static <a class="code" href="group__sys__flash__utils.html#ga6ac949979ebabc3d7130779422ead49a">FLASH_ATTR</a> <span class="keyword">const</span> <span class="keywordtype">char</span> _xfa_ ## cmd ## _cmd_name[] = #cmd; \</div><div class="line">    static <a class="code" href="group__sys__flash__utils.html#ga6ac949979ebabc3d7130779422ead49a">FLASH_ATTR</a> <span class="keyword">const</span> <span class="keywordtype">char</span> _xfa_ ## cmd ## _cmd_desc[] = help; \</div><div class="line">    XFA_CONST(<a class="code" href="structshell__command__xfa__t.html">shell_command_xfa_t</a>, shell_commands_xfa_v2, 0) _xfa_ <span class="preprocessor">## cmd ## _cmd = { \</span></div><div class="line"><span class="preprocessor">        .name = _xfa_ ## cmd ## _cmd_name, \</span></div><div class="line"><span class="preprocessor">        .desc = _xfa_ ## cmd ## _cmd_desc, \</span></div><div class="line"><span class="preprocessor">        .handler = &amp;func \</span></div><div class="line"><span class="preprocessor">    };</span></div><div class="ttc" id="structshell__command__xfa__t_html"><div class="ttname"><a href="structshell__command__xfa__t.html">shell_command_xfa_t</a></div><div class="ttdoc">A single command in the list of the supported commands. </div><div class="ttdef"><b>Definition:</b> <a href="shell_8h_source.html#l00195">shell.h:195</a></div></div>
<div class="ttc" id="xfa_8h_html_a485e9df1d2f61fb38a2d7982496d7406"><div class="ttname"><a href="xfa_8h.html#a485e9df1d2f61fb38a2d7982496d7406">XFA_USE_CONST</a></div><div class="ttdeci">#define XFA_USE_CONST(type, name)</div><div class="ttdoc">Declare an external read-only cross-file array. </div><div class="ttdef"><b>Definition:</b> <a href="xfa_8h_source.html#l00114">xfa.h:114</a></div></div>
<div class="ttc" id="group__sys__flash__utils_html_ga6ac949979ebabc3d7130779422ead49a"><div class="ttname"><a href="group__sys__flash__utils.html#ga6ac949979ebabc3d7130779422ead49a">FLASH_ATTR</a></div><div class="ttdeci">#define FLASH_ATTR</div><div class="ttdoc">C type qualifier required to place a variable in flash. </div><div class="ttdef"><b>Definition:</b> <a href="flash__utils_8h_source.html#l00068">flash_utils.h:68</a></div></div>
</div><!-- fragment -->
<p>Define shell command. </p>
<dl class="section note"><dt>Note</dt><dd>This is not available from C++, but a trivial C file can easily hook up a <code>extern "C"</code> function implemented in C++.</dd></dl>
<p>This macro is a helper for defining a shell command and adding it to the shell commands XFA (cross file array).</p>
<p>Shell commands added using this macros will be sorted <em>after</em> builtins and commands passed via parameter to <code><a class="el" href="group__sys__shell.html#ga3d3d8dea426c6c5fa188479e53286aec" title="Start a shell and exit once EOF is reached. ">shell_run_once()</a></code>. If a command with the same name exists in any of those, they will make a command added via this macro inaccassible.</p>
<p>Commands added with this macro will be sorted alphanumerically by <code>name</code>.</p>
<dl class="section warning"><dt>Warning</dt><dd><b class="text-danger">This feature is experimental!</b><br />
 This should be considered experimental API, subject to change without notice!</dd></dl>
<p>Example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="shell_8h.html">shell.h</a>&quot;</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> _my_command(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div><div class="line"><a class="code" href="group__sys__shell.html#gaafec93867eb7af5bedfe2dcfb8d8120e">SHELL_COMMAND</a>(my_command, <span class="stringliteral">&quot;my command help text&quot;</span>, _my_command);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="shell_8h_source.html#l00304">304</a> of file <a class="el" href="shell_8h_source.html">shell.h</a>.</p>

</div>
</div>
<a id="gac6ce9a12c394d101eb934286106ed2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6ce9a12c394d101eb934286106ed2ee">&#9670;&nbsp;</a></span>SHELL_DEFAULT_BUFSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHELL_DEFAULT_BUFSIZE&#160;&#160;&#160;(128)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default shell buffer size (maximum line length shell can handle) </p>
<dl class="section warning"><dt>Warning</dt><dd>When terminals that buffer input and send the full command line in one go are used on stdin implementations with fast bursts of data, it may be necessary to increase the <a class="el" href="group__sys__stdio.html#ga0435de87ff46b82a46f4007b2a462237">STDIO_RX_BUFSIZE</a> to make practical use of this buffer, especially because the current mechanism of passing stdin (<code><a class="el" href="structisrpipe__t.html" title="Context structure for isrpipe. ">isrpipe_t</a> stdin_isrpipe</code>) does not support backpressure and overflows silently. As a consequence, commands through such terminals appear to be truncated at <a class="el" href="group__sys__stdio.html#ga0435de87ff46b82a46f4007b2a462237">STDIO_RX_BUFSIZE</a> bytes (defaulting to 64) unless the command is sent in parts (on many terminals, by pressing Ctrl-D half way through the command).</dd></dl>
<p>For example, this affects systems with direct USB stdio (<a class="el" href="group__usbus__cdc__acm__stdio.html">STDIO over CDC ACM (usbus)</a>) with the default terminal <code>pyterm</code>. </p>

<p class="definition">Definition at line <a class="el" href="shell_8h_source.html#l00119">119</a> of file <a class="el" href="shell_8h_source.html">shell.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga6cf265eee7d4bf93b186d6aaadd659a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6cf265eee7d4bf93b186d6aaadd659a5">&#9670;&nbsp;</a></span>shell_command_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* shell_command_handler_t) (int argc, char **argv)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of a shell callback handler. </p>
<p>The functions supplied to <a class="el" href="group__sys__shell.html#ga6e7970d4823d1624837c9e7ddc6accf0" title="Back-porting alias for shell_run_forever. ">shell_run()</a> must use this signature. It is designed to mimic the function signature of <code>main()</code>. For this reason, the argument list is terminated with a <code>NULL</code>, i.e <code>argv[argc] == NULL</code> (which is an ANSI-C requirement, and a detail that newlib's <code>getopt()</code> implementation relies on). The function name is passed in <code>argv[0]</code>.</p>
<p>Escape sequences are removed before the function is called.</p>
<p>The called function may edit <code>argv</code> and the contained strings, but it must be taken care of not to leave the boundaries of the array. This functionality is another property that many <code>getopt()</code> implementations rely on to provide their so-called "permute" feature extension.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>Number of arguments supplied to the function invocation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>The supplied argument list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
Anything else on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="shell_8h_source.html#l00176">176</a> of file <a class="el" href="shell_8h_source.html">shell.h</a>.</p>

</div>
</div>
<a id="ga169f80d22f314444b0a8b8efa6bc5fb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga169f80d22f314444b0a8b8efa6bc5fb9">&#9670;&nbsp;</a></span>shell_command_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structshell__command__t.html">shell_command_t</a>  <a class="el" href="structshell__command__t.html">shell_command_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A single command in the list of the supported commands. </p>
<p>The list of commands is NULL terminated, i.e. the last element must be <code>{ NULL, NULL, NULL }</code>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3cff0292efc7d2c7cad01708064a444e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3cff0292efc7d2c7cad01708064a444e">&#9670;&nbsp;</a></span>shell_handle_input_line()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int shell_handle_input_line </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structshell__command__t.html">shell_command_t</a> *&#160;</td>
          <td class="paramname"><em>commands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse and run a line of text as a shell command with arguments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">commands</td><td>ptr to array of command structs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">line</td><td>The input line to parse</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>return value of the found command </dd>
<dd>
-ENOEXEC if no valid command could be found </dd></dl>

</div>
</div>
<a id="ga9581ba9058c4dbcb09468055a83bcde6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9581ba9058c4dbcb09468055a83bcde6">&#9670;&nbsp;</a></span>shell_parse_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int shell_parse_file </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structshell__command__t.html">shell_command_t</a> *&#160;</td>
          <td class="paramname"><em>commands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>line_nr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read shell commands from a file and run them. </p>
<dl class="section note"><dt>Note</dt><dd>This requires the <code>vfs</code> module.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">commands</td><td>ptr to array of command structs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>file to read shell commands from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">line_nr</td><td>line on which an error occurred, may be NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if all commands were executed successful error return of failed command otherwise </dd></dl>

</div>
</div>
<a id="ga80aaccb8dd5ee218b6dcae8175444afd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80aaccb8dd5ee218b6dcae8175444afd">&#9670;&nbsp;</a></span>shell_post_command_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shell_post_command_hook </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional hook after shell command is called. </p>
<p>User implemented function gets called before a valid shell command will be called. </p><dl class="section note"><dt>Note</dt><dd>Only executed with the <code>shell_hooks</code> module.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ret</td><td>Return value of the shell command. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>Number of arguments supplied to the function invocation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>The supplied argument list. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga58012536a8c7a12b37cd82b0ffddbc47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58012536a8c7a12b37cd82b0ffddbc47">&#9670;&nbsp;</a></span>shell_post_readline_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shell_post_readline_hook </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional hook after readline has triggered. </p>
<p>User implemented function gets called after the shell readline is complete. </p><dl class="section note"><dt>Note</dt><dd>Only executed with the <code>shell_hooks</code> module. </dd></dl>

</div>
</div>
<a id="ga06b6793cabe83ec1e30db3bfcafa8ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06b6793cabe83ec1e30db3bfcafa8ac5">&#9670;&nbsp;</a></span>shell_pre_command_hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shell_pre_command_hook </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional hook before shell command is called. </p>
<p>User implemented function gets called before a valid shell command will be called. </p><dl class="section note"><dt>Note</dt><dd>Only executed with the <code>shell_hooks</code> module.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>Number of arguments supplied to the function invocation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>The supplied argument list. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6e7970d4823d1624837c9e7ddc6accf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e7970d4823d1624837c9e7ddc6accf0">&#9670;&nbsp;</a></span>shell_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void shell_run </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structshell__command__t.html">shell_command_t</a> *&#160;</td>
          <td class="paramname"><em>commands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Back-porting alias for <a class="el" href="group__sys__shell.html#ga51ab5e366fa7797e8529071abd68f68b">shell_run_forever</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">commands</td><td>ptr to array of command structs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">line_buf</td><td>Buffer that will be used for reading a line </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>nr of bytes that fit in line_buf </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="shell_8h_source.html#l00241">241</a> of file <a class="el" href="shell_8h_source.html">shell.h</a>.</p>

</div>
</div>
<a id="ga51ab5e366fa7797e8529071abd68f68b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51ab5e366fa7797e8529071abd68f68b">&#9670;&nbsp;</a></span>shell_run_forever()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void shell_run_forever </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structshell__command__t.html">shell_command_t</a> *&#160;</td>
          <td class="paramname"><em>commands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start a shell and restart it if it exits. </p>
<p>If <code>CONFIG_SHELL_SHUTDOWN_ON_EXIT</code> is set (e.g. on native) the shell will instead shut down RIOT once EOF is reached.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">commands</td><td>ptr to array of command structs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">line_buf</td><td>Buffer that will be used for reading a line </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>nr of bytes that fit in line_buf </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="shell_8h_source.html#l00222">222</a> of file <a class="el" href="shell_8h_source.html">shell.h</a>.</p>

</div>
</div>
<a id="ga3d3d8dea426c6c5fa188479e53286aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d3d8dea426c6c5fa188479e53286aec">&#9670;&nbsp;</a></span>shell_run_once()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shell_run_once </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structshell__command__t.html">shell_command_t</a> *&#160;</td>
          <td class="paramname"><em>commands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a shell and exit once EOF is reached. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">commands</td><td>ptr to array of command structs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">line_buf</td><td>Buffer that will be used for reading a line </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>nr of bytes that fit in line_buf </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Wed Mar 12 2025 10:21:34 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
