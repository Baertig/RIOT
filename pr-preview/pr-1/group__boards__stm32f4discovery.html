<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>STM32F4Discovery</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__boards__stm32f4discovery.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">STM32F4Discovery<div class="ingroups"><a class="el" href="group__boards.html">Boards</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><br />
Support for the STM32F4Discovery board  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><br />
</p>
<p>Support for the STM32F4Discovery board </p>
<p>See <a href="https://github.com/RIOT-OS/RIOT/wiki/Getting-started-with-STM32F%5B0%7C3%7C4%5Ddiscovery-boards">this page</a> for a quick getting started guide.</p>
<div class="image">
<img src="https://raw.githubusercontent.com/wiki/RIOT-OS/RIOT/images/stm32f4discovery_pinout_RIOT.png" alt="Stm32f4discovery with RIOT pin names"/>
</div>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">MCU  </th><th class="markdownTableHeadLeft">STM32F407VGT6   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Family  </td><td class="markdownTableBodyLeft">ARM Cortex-M4   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor  </td><td class="markdownTableBodyLeft">ST Microelectronics   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Package  </td><td class="markdownTableBodyLeft">LQFP100   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">RAM  </td><td class="markdownTableBodyLeft">192 KiB (128 KiB RAM + 64 KiB CCMRAM)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Flash  </td><td class="markdownTableBodyLeft">1024 KiB   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Frequency  </td><td class="markdownTableBodyLeft">up to 168 MHz   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">FPU  </td><td class="markdownTableBodyLeft">yes   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Timers  </td><td class="markdownTableBodyLeft">14 (12× 16bit, 2× 32bit [TIM2 + TIM5])   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ADCs  </td><td class="markdownTableBodyLeft">3× 16 channel 6 to 12-bit   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">UARTs  </td><td class="markdownTableBodyLeft">6   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SPIs  </td><td class="markdownTableBodyLeft">3   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I2Cs  </td><td class="markdownTableBodyLeft">3   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Vcc  </td><td class="markdownTableBodyLeft">2.0 V - 3.6 V   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MCU Datasheet  </td><td class="markdownTableBodyLeft"><a href="https://www.st.com/resource/en/datasheet/stm32f407vg.pdf">MCU Datasheet</a>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Reference Manual  </td><td class="markdownTableBodyLeft"><a href="https://www.st.com/resource/en/reference_manual/dm00031020.pdf">Reference Manual</a>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Programming Manual  </td><td class="markdownTableBodyLeft"><a href="https://www.st.com/resource/en/programming_manual/dm00046982.pdf">Programming Manual</a>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Board Manual  </td><td class="markdownTableBodyLeft"><a href="https://www.st.com/resource/en/user_manual/dm00039084.pdf">Board Manual</a>   </td></tr>
</table>
<p>After connecting the board to your computer using the Mini USB port, <code>cd</code> to the directory of the app you intend to flash and run:</p>
<div class="fragment"><div class="line">make BOARD=stm32f4discovery flash</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>You will need to have OpenOCD installed, e.g. <code>sudo apt install openocd</code></dd></dl>
<p>By default, STDIO is implemented via the native USB interface.</p>
<p>Connect your computer via the micro USB connector to the board. (It is safe to connect both the native USB port of the MCU at the micro USB connector and the ST-Link programmer/debugger at the mini USB connector at the same time.)</p>
<p>Afterwards, simply run (with the current working directory of your terminal set to directory of the app you flashed):</p>
<div class="fragment"><div class="line">make BOARD=stm32f4discovery term</div></div><!-- fragment --><p>Connect your USB to UART bridge as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Pin UART Adapter  </th><th class="markdownTableHeadLeft">Pin Board   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">TXD  </td><td class="markdownTableBodyLeft">RXD (PA3)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">RXD  </td><td class="markdownTableBodyLeft">TXD (PA2)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">GND  </td><td class="markdownTableBodyLeft">GND   </td></tr>
</table>
<p>Now flash with stdio over UART by selecting the module <code>stdio_uart</code> and connect to the serial. You can do both by running in a terminal (and the working directory set to the directory of the app you want to run):</p>
<div class="fragment"><div class="line">USEMODULE=stdio_uart make BOARD=stm32f4discovery flash term</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The <code>USEMODULE=stdio</code> needs to be specified <em>before</em> the <code>make</code> command to pass it as environment variable.</dd></dl>
<p>Please refer to <a href="https://docs.google.com/spreadsheets/d/11iqdux3K1-7FPZChufNgpChwENkgCiLrnKJPoCcJxdg">this document</a> for the RIOTs pin mapping for the stm32f4discovery board. The pin mapping is chosen completely arbitrary and can be altered by editing the <code><a class="el" href="boards_2stm32f4discovery_2include_2periph__conf_8h.html">boards/stm32f4discovery/include/periph_conf.h</a></code> header file.</p>
<p>2 Buttons:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">NAME  </th><th class="markdownTableHeadLeft">USER  </th><th class="markdownTableHeadLeft">RESET   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Pin  </td><td class="markdownTableBodyLeft">PA0 (IN)  </td><td class="markdownTableBodyLeft">NRST   </td></tr>
</table>
<p>6 User controllable LEDs:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">NAME  </th><th class="markdownTableHeadLeft">LD3  </th><th class="markdownTableHeadLeft">LD4  </th><th class="markdownTableHeadLeft">LD5  </th><th class="markdownTableHeadLeft">LD6  </th><th class="markdownTableHeadLeft">LD7  </th><th class="markdownTableHeadLeft">LD8   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Color  </td><td class="markdownTableBodyLeft">orange  </td><td class="markdownTableBodyLeft">green  </td><td class="markdownTableBodyLeft">red  </td><td class="markdownTableBodyLeft">blue  </td><td class="markdownTableBodyLeft">green  </td><td class="markdownTableBodyLeft">red   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Pin  </td><td class="markdownTableBodyLeft">PD13  </td><td class="markdownTableBodyLeft">PD12  </td><td class="markdownTableBodyLeft">PD14  </td><td class="markdownTableBodyLeft">PD15  </td><td class="markdownTableBodyLeft">PA9  </td><td class="markdownTableBodyLeft">PD5   </td></tr>
</table>
<p>LEDs LD7 and LD8 are used by the USB connector for over-current (LD8) and data (LD7) indication.</p>
<p>The board has a micro USB port that can be used for USB device mode. As the ST-Link on the board does not provide a USB-UART interface, the STDIO is mapped to the micro USB port by default (via CDC ACM).</p>
<p>The STM32F4discovery board contains a 3-axis MEMS accelerometer that can sample with up to 1.6kHz.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Sensor  </th><th class="markdownTableHeadLeft">LIS3DSH   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Type  </td><td class="markdownTableBodyLeft">Accelerometer   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor  </td><td class="markdownTableBodyLeft">ST Microelectronics   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Datasheet  </td><td class="markdownTableBodyLeft"><a href="http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00040962.pdf">Datasheet</a>   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Pin / Bus  </th><th class="markdownTableHeadLeft">Function   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SPI bus (RIOT)  </td><td class="markdownTableBodyLeft"><code><a class="el" href="group__drivers__periph__spi.html#gafb9420809bc7722e41488a090b53eaf9" title="Default SPI device access macro. ">SPI_DEV(0)</a></code>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SPI bus (hardware)  </td><td class="markdownTableBodyLeft">SPI1   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SCK  </td><td class="markdownTableBodyLeft">PA5 (OUT, SPI1_SCK)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MISO  </td><td class="markdownTableBodyLeft">PA6 (IN, SPI1_MISO)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">MOSI  </td><td class="markdownTableBodyLeft">PA7 (OUT, SPI1_MOSI)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">INT1  </td><td class="markdownTableBodyLeft">PE0 (IN)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">INT2  </td><td class="markdownTableBodyLeft">PE1 (IN)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">CS  </td><td class="markdownTableBodyLeft">PE3 (OUT)   </td></tr>
</table>
<p>The STM32F4discovery board contains a on-board MEMS audio sensor.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Sensor  </th><th class="markdownTableHeadLeft">MP45DT02   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Type  </td><td class="markdownTableBodyLeft">Audio sensor   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor  </td><td class="markdownTableBodyLeft">ST Microelectronics   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Datasheet  </td><td class="markdownTableBodyLeft"><a href="http://www.mouser.com/pdfdocs/STM_MP45DT02_Datasheet.PDF">Datasheet</a>   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Pin / Interface  </th><th class="markdownTableHeadLeft">Function   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">I2S interface (hardware)  </td><td class="markdownTableBodyLeft">I2S2   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I2S interface (RIOT)  </td><td class="markdownTableBodyLeft">n/a   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">CLK  </td><td class="markdownTableBodyLeft">PB10   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">DOUT  </td><td class="markdownTableBodyLeft">PC3   </td></tr>
</table>
<p>The board contains an digital analog converter (DAC) with integrated class D speaker driver.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Device  </th><th class="markdownTableHeadLeft">CS43L22   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Type  </td><td class="markdownTableBodyLeft">DAC   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor  </td><td class="markdownTableBodyLeft">Cirrus Logic   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Datasheet  </td><td class="markdownTableBodyLeft"><a href="http://www.cirrus.com/en/pubs/proDatasheet/CS43L22_F2.pdf">Datasheet</a>   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Pin / Interface / Bus  </th><th class="markdownTableHeadLeft">Function   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Analog (hardware)  </td><td class="markdownTableBodyLeft">DAC1   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Analog (RIOT)  </td><td class="markdownTableBodyLeft"><code><a class="el" href="group__drivers__periph__dac.html#gacd6d66e4e9bb209927d29c0e8d13dea9" title="Default DAC access macro. ">DAC_LINE(0)</a></code>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">I2S interface (hardware)  </td><td class="markdownTableBodyLeft">I2S3   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I2S interface (RIOT)  </td><td class="markdownTableBodyLeft">n/a   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">I2C bus (hardware)  </td><td class="markdownTableBodyLeft">I2C1   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I2C bus (RIOT)  </td><td class="markdownTableBodyLeft"><code>I2C_BUS(0)</code>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">AIN1  </td><td class="markdownTableBodyLeft">PA4 (DAC1_OUT)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SCL  </td><td class="markdownTableBodyLeft">PB6 (I2C1_SCL)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SDA  </td><td class="markdownTableBodyLeft">PB9 (I2C1_SDA)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MCLK  </td><td class="markdownTableBodyLeft">PC7 (I2S3_MCK)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SCLK  </td><td class="markdownTableBodyLeft">PC10 (I2S3_CK)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SDIN  </td><td class="markdownTableBodyLeft">PC12 (I2S3_SD)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">RESET  </td><td class="markdownTableBodyLeft">PD4 (OUT)   </td></tr>
</table>
<p>For using the STM32F4discovery board we strongly recommend the usage of the <a href="https://launchpad.net/gcc-arm-embedded">GNU Tools for ARM Embedded Processors</a> toolchain.</p>
<h1><a class="anchor" id="autotoc_md1470"></a>
Alternative way to flash</h1>
<h2><a class="anchor" id="autotoc_md1471"></a>
Using openocd to flash the RIOT binary to the board</h2>
<ol type="1">
<li>Compile your code to have a .hex file</li>
<li>Connect the board with the mini usb cable, on the debugger side to your PC</li>
<li>run openocd with <code>$ sudo /usr/local/bin/openocd -f interface/stlink-v2.cfg -f target/stm32f4x_stlink.cfg</code></li>
<li>in a new terminal connect: <code>telnet 127.0.0.1 4444</code></li>
<li>run: <div class="fragment"><div class="line">&gt; flash banks</div><div class="line"><span class="preprocessor">#0 : stm32f4x.flash (stm32f2x) at 0x08000000, size 0x00100000, buswidth 0,</span></div><div class="line">chipwidth 0</div><div class="line"></div><div class="line">&gt; halt</div><div class="line">target state: halted</div><div class="line">target halted due to debug-request, current mode: <a class="code" href="structThread.html">Thread</a></div><div class="line">xPSR: 0x21000000 pc: 0x0800251a msp: 0x20000c4c</div><div class="line"></div><div class="line">&gt; flash write_image erase unlock /home/c/git/RIOT-</div><div class="line">OS/RIOT/examples/ipc_pingpong/bin/stm32f4discovery/ipc_pingpong.hex 0</div><div class="line"><span class="keyword">auto</span> erase enabled</div><div class="line"><span class="keyword">auto</span> unlock enabled</div><div class="line">target state: halted</div><div class="line">target halted due to breakpoint, current mode: <a class="code" href="structThread.html">Thread</a></div><div class="line">xPSR: 0x61000000 pc: 0x20000042 msp: 0x20000c4c</div><div class="line">wrote 16384 bytes from file /home/c/git/RIOT-</div><div class="line">OS/RIOT/examples/ipc_pingpong/bin/stm32f4discovery/ipc_pingpong.hex in 1.200528s</div><div class="line">(13.327 <a class="code" href="units_8h.html#ae40428faaf55c32976e3e9bd81aa1f15">KiB</a>/s)</div><div class="line"></div><div class="line">&gt; reset</div></div><!-- fragment --> The board is now flashed with your RIOT binary</li>
</ol>
<h1><a class="anchor" id="autotoc_md1472"></a>
Emulator</h1>
<p>To emulate this board you need an updated version of <a href="https://github.com/renode/renode">renode</a> installed, at least version 1.11.</p>
<div class="fragment"><div class="line">EMULATE=1 BOARD=stm32f4discovery make all term</div></div><!-- fragment --><h2><a class="anchor" id="autotoc_md1473"></a>
Known Issues / Problems</h2>
<h3><a class="anchor" id="autotoc_md1474"></a>
I2C</h3>
<p>When connecting an I2C device and a logic analyzer to an I2C port at the same time, the internal pull-up resistors are not sufficient for stable bus operation. You probably have to connect external pull-ups to both bus lines. 10K is a good value to start with.</p>
<h3><a class="anchor" id="autotoc_md1475"></a>
macOS &amp; make term</h3>
<p>If you want the terminal to work using <code>make term</code> command and get a message about missing tty device install the driver from <a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers</a> . </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:stm32f4discovery_2include_2arduino__iomap_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32f4discovery_2include_2arduino__iomap_8h.html">arduino_iomap.h</a></td></tr>
<tr class="memdesc:stm32f4discovery_2include_2arduino__iomap_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping from MCU pins to Arduino pins. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:stm32f4discovery_2include_2board_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32f4discovery_2include_2board_8h.html">board.h</a></td></tr>
<tr class="memdesc:stm32f4discovery_2include_2board_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific definitions for the STM32F4Discovery evaluation board. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:stm32f4discovery_2include_2gpio__params_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stm32f4discovery_2include_2gpio__params_8h.html">gpio_params.h</a></td></tr>
<tr class="memdesc:stm32f4discovery_2include_2gpio__params_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific configuration of direct mapped GPIOs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:boards_2stm32f4discovery_2include_2periph__conf_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="boards_2stm32f4discovery_2include_2periph__conf_8h.html">periph_conf.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Thu Mar 13 2025 10:38:32 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
