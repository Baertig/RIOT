<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>sdmmc_driver_t Struct Reference</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('structsdmmc__driver__t.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">sdmmc_driver_t Struct Reference<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a> &raquo; <a class="el" href="group__drivers__periph.html">Peripheral Driver Interface</a><a class="el" href="group__drivers.html">Drivers</a> &raquo;  &#124; <a class="el" href="group__drivers__storage.html">Storage Device Drivers</a> &raquo; <a class="el" href="group__drivers__sdmmc.html">SDIO/SD/MMC Device API (SDMMC)</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Low-level SDIO/SD/MMC peripheral driver.  
 <a href="structsdmmc__driver__t.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Low-level SDIO/SD/MMC peripheral driver. </p>
<p>The low-level SDIO/SD/MMC peripheral driver interface as used by high-level SDIO/SD/MMC device API functions. It has to be implemented for a specific CPU.</p>
<dl class="section note"><dt>Note</dt><dd>High-level functions such as <a class="el" href="group__drivers__sdmmc.html#ga3438a6d03cd98606a885462800e3ef89">sdmmc_read_blocks</a> are provided by the SDIO/SD/MMC API and should be used instead. Directly calling these functions is not recommended. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l00961">961</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:aa2b8f7bd321d99c509648bddba74f955"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#aa2b8f7bd321d99c509648bddba74f955">init</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev)</td></tr>
<tr class="memdesc:aa2b8f7bd321d99c509648bddba74f955"><td class="mdescLeft">&#160;</td><td class="mdescRight">Basic initialization of the given SDIO/SD/MMC device.  <a href="#aa2b8f7bd321d99c509648bddba74f955">More...</a><br /></td></tr>
<tr class="separator:aa2b8f7bd321d99c509648bddba74f955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7facc12cc04c7c219016103be3e5e2dd"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#a7facc12cc04c7c219016103be3e5e2dd">send_cmd</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="group__drivers__sdmmc.html#ga0cb33b64a4279b29e816220206cc46b5">sdmmc_cmd_t</a> cmd_idx, uint32_t arg, <a class="el" href="group__drivers__sdmmc.html#ga49041beb07426755c85face87e70e5f2">sdmmc_resp_t</a> resp_type, uint32_t *resp)</td></tr>
<tr class="memdesc:a7facc12cc04c7c219016103be3e5e2dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send command to SDIO/SD/MMC Card and optionally wait for response.  <a href="#a7facc12cc04c7c219016103be3e5e2dd">More...</a><br /></td></tr>
<tr class="separator:a7facc12cc04c7c219016103be3e5e2dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e0fef0c7a1ca3deb22844549d1cfcb"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#ae7e0fef0c7a1ca3deb22844549d1cfcb">card_init</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev)</td></tr>
<tr class="memdesc:ae7e0fef0c7a1ca3deb22844549d1cfcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card Initialization and Identification.  <a href="#ae7e0fef0c7a1ca3deb22844549d1cfcb">More...</a><br /></td></tr>
<tr class="separator:ae7e0fef0c7a1ca3deb22844549d1cfcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14290b51beafeb5d56669a28b4906e40"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#a14290b51beafeb5d56669a28b4906e40">set_bus_width</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="group__drivers__sdmmc.html#gaf7703d21c829e1ab436272c69f718706">sdmmc_bus_width_t</a> width)</td></tr>
<tr class="memdesc:a14290b51beafeb5d56669a28b4906e40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set data bus width.  <a href="#a14290b51beafeb5d56669a28b4906e40">More...</a><br /></td></tr>
<tr class="separator:a14290b51beafeb5d56669a28b4906e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8279b6dcc834387863c42f72ba062091"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#a8279b6dcc834387863c42f72ba062091">set_clock_rate</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="group__drivers__sdmmc.html#ga716a46ecf3e8ad8be8401d617ea36a01">sdmmc_clock_rate_t</a> rate)</td></tr>
<tr class="memdesc:a8279b6dcc834387863c42f72ba062091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set SD CLK signal rate.  <a href="#a8279b6dcc834387863c42f72ba062091">More...</a><br /></td></tr>
<tr class="separator:a8279b6dcc834387863c42f72ba062091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34770636b836cc8fc82caf4f1b0456d8"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#a34770636b836cc8fc82caf4f1b0456d8">enable_clock</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, bool enable)</td></tr>
<tr class="memdesc:a34770636b836cc8fc82caf4f1b0456d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable the SD CLK signal.  <a href="#a34770636b836cc8fc82caf4f1b0456d8">More...</a><br /></td></tr>
<tr class="separator:a34770636b836cc8fc82caf4f1b0456d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991b2731d78787fadd6c50ab7af20470"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#a991b2731d78787fadd6c50ab7af20470">xfer_prepare</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> *xfer)</td></tr>
<tr class="memdesc:a991b2731d78787fadd6c50ab7af20470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare a data transfer.  <a href="#a991b2731d78787fadd6c50ab7af20470">More...</a><br /></td></tr>
<tr class="separator:a991b2731d78787fadd6c50ab7af20470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332bc0cee951ac6c393c553a460215d5"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#a332bc0cee951ac6c393c553a460215d5">xfer_execute</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> *xfer, const void *data_wr, void *data_rd, uint16_t *done)</td></tr>
<tr class="memdesc:a332bc0cee951ac6c393c553a460215d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the data transfer.  <a href="#a332bc0cee951ac6c393c553a460215d5">More...</a><br /></td></tr>
<tr class="separator:a332bc0cee951ac6c393c553a460215d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accc93e4916aa1e023308b1b1bf03a762"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsdmmc__driver__t.html#accc93e4916aa1e023308b1b1bf03a762">xfer_finish</a> )(<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> *xfer)</td></tr>
<tr class="memdesc:accc93e4916aa1e023308b1b1bf03a762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish the data transfer.  <a href="#accc93e4916aa1e023308b1b1bf03a762">More...</a><br /></td></tr>
<tr class="separator:accc93e4916aa1e023308b1b1bf03a762"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Field Documentation</h2>
<a id="ae7e0fef0c7a1ca3deb22844549d1cfcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7e0fef0c7a1ca3deb22844549d1cfcb">&#9670;&nbsp;</a></span>card_init</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::card_init) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Card Initialization and Identification. </p>
<dl class="section warning"><dt>Warning</dt><dd>Usually the standard procedure implemented by the high-level SDIO/SD/MMC device API function <a class="el" href="group__drivers__sdmmc.html#ga8f38aee0dad654c7200e973ebe22a0ba">sdmmc_card_init</a> is used for card initialization and identification (recommended). The low-level SDIO/SD/MMC peripheral driver should implement its own <a class="el" href="structsdmmc__driver__t.html#ae7e0fef0c7a1ca3deb22844549d1cfcb">sdmmc_driver_t::card_init</a> function only in very special cases, e.g. when special hardware handling is required. Therefore, this driver function should be set to NULL, that is the card initialization and identification function is not implemented by low-level SDIO/SD/MMC peripheral driver</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__drivers__sdmmc.html#ga8f38aee0dad654c7200e973ebe22a0ba">sdmmc_card_init</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-ENODEV</td><td>if card is not present or not usable </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if card is not supported or can't operate under supplied voltage </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>on card status error </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>on card initialization and identification timeout </td></tr>
    <tr><td class="paramname">-EBADMSG</td><td>on CRC7 error </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01065">1065</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="a34770636b836cc8fc82caf4f1b0456d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34770636b836cc8fc82caf4f1b0456d8">&#9670;&nbsp;</a></span>enable_clock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::enable_clock) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, bool enable)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable the SD CLK signal. </p>
<p>The function is used by the SDIO/SD/MMC device API functions to enable or disable the SD CLK signal if the SDIO/SD/MMC peripheral driver does not support the Auto CLK feature (periph_sdmmc_auto_clk). It can be left NULL if the SDIO/SD/MMC peripheral driver does not support enabling or disabling the SD CLK signal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enable</td><td>enable SD CLK signal on true or disable the SD CLK signal on false</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-EIO</td><td>if the SD CLK signal could not be enabled or disabled </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01161">1161</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="aa2b8f7bd321d99c509648bddba74f955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2b8f7bd321d99c509648bddba74f955">&#9670;&nbsp;</a></span>init</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* sdmmc_driver_t::init) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Basic initialization of the given SDIO/SD/MMC device. </p>
<p>Low-level SDIO/SD/MMC peripheral driver function for basic initialization of the peripheral including pin configuration of used pins. It is called by <a class="el" href="group__drivers__sdmmc.html#ga4c14dfd4d1ac66a3be2db55559750f9f">sdmmc_init</a> during the board initialization to prepare the SDIO/SD/MMC peripheral for further usage. Specific initialization parameters required for this initialization are defined in the board's <code>periph_conf.h</code>.</p>
<p>Errors like configuration parameter problems are not signaled by return values, but by using the <code><a class="el" href="assert_8h.html#a3153a272f18d0f805028fce7e4337b53" title="abort the program if assertion is false ">assert()</a></code>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__drivers__sdmmc.html#ga4c14dfd4d1ac66a3be2db55559750f9f">sdmmc_init</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to initialize </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l00980">980</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="a7facc12cc04c7c219016103be3e5e2dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7facc12cc04c7c219016103be3e5e2dd">&#9670;&nbsp;</a></span>send_cmd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::send_cmd) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="group__drivers__sdmmc.html#ga0cb33b64a4279b29e816220206cc46b5">sdmmc_cmd_t</a> cmd_idx, uint32_t arg, <a class="el" href="group__drivers__sdmmc.html#ga49041beb07426755c85face87e70e5f2">sdmmc_resp_t</a> resp_type, uint32_t *resp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send command to SDIO/SD/MMC Card and optionally wait for response. </p>
<p>Low-level SDIO/SD/MMC peripheral driver function to send command <code>cmd_idx</code> with argument <code>arg</code> to the SDIO/SD/MMC card. <code>resp_type</code> specifies the type of the response expected.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function must not be used for application specific commands. The high-level SDIO/SD/MMC device API function <a class="el" href="group__drivers__sdmmc.html#gaa0f26ea97f1a1ea115fd761b695122ad">sdmmc_send_acmd</a> is used instead.</dd></dl>
<p>To ensure that the <a class="el" href="group__drivers__sdmmc.html#gaa0f26ea97f1a1ea115fd761b695122ad">sdmmc_send_acmd</a> function is used for application specific commands, the function must fail if the command <code>cmd_idx</code> is an application specific command (ACMDx). Use </p><div class="fragment"><div class="line"><a class="code" href="assert_8h.html#a3153a272f18d0f805028fce7e4337b53">assert</a>((cmd_idx &amp; <a class="code" href="group__drivers__sdmmc.html#ga975c5c3e02538be7f02d1968f9939f61">SDMMC_ACMD_PREFIX</a>) == 0);</div></div><!-- fragment --><p> in the implementation of this function for that purpose.</p>
<p>The response has to be stored word-wise in host byte order in the buffer provided by <code>resp</code> as follows:</p>
<ul>
<li><code>resp_type</code> = SDMMC_NO_R (No Response): <code>resp</code> can be NULL</li>
<li><code>resp_tpye</code> = SDMMC_R2 (Long Response): <code>resp</code> = { R[127:96], R[95:64], R[63:32], R[31:0] }</li>
<li><code>resp_type</code> = anything else (Short Response): <code>resp</code> = { R[39:8] }</li>
</ul>
<p>The buffer provided by <code>resp</code> can be NULL if the response is not needed. However, the low-level SDIO/SD/MMC peripheral driver must receive the expected response, but does not store it in <code>resp</code> in that case.</p>
<dl class="section note"><dt>Note</dt><dd>R3 does not use CRC7 in CRC field but a fixed value of <code>0b111111</code>. The driver must check the CRC field for this response.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__drivers__sdmmc.html#gaf37589dcedea43a9a1ca68245e2b576e">sdmmc_send_cmd</a> and <a class="el" href="group__drivers__sdmmc.html#gaa0f26ea97f1a1ea115fd761b695122ad" title="Send application specific command optionally wait for response. ">sdmmc_send_acmd</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd_idx</td><td>Command index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Command argument </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resp_type</td><td>Type of response expected </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">resp</td><td>Buffer of 32-bit words to store the response if needed, otherwise NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-ENODEV</td><td>if card is not present or not usable </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if card does not support the command or is in wrong state </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>on card status error </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>on timeout condition </td></tr>
    <tr><td class="paramname">-EBADMSG</td><td>on CRC7 error in response </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01036">1036</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="a14290b51beafeb5d56669a28b4906e40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14290b51beafeb5d56669a28b4906e40">&#9670;&nbsp;</a></span>set_bus_width</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::set_bus_width) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="group__drivers__sdmmc.html#gaf7703d21c829e1ab436272c69f718706">sdmmc_bus_width_t</a> width)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set data bus width. </p>
<p>Set the data bus width used by the SDIO/SD/MMC peripheral. The function is called by the high-level SDIO/SD/MMC device function <a class="el" href="group__drivers__sdmmc.html#ga8f38aee0dad654c7200e973ebe22a0ba">sdmmc_card_init</a> at the end of the card initialization and identification procedure to change the data bus width used by the SDIO/SD/MMC peripheral. The data bus width of the card has been already changed at that time by sending the ACMD6 (<code>SET_BUS_WIDTH</code>) command.</p>
<p>Supported data bus width depend on</p>
<ul>
<li>the card type,</li>
<li>the mode in which the card operates and</li>
<li>the SDIO/SD/MMC peripheral.</li>
</ul>
<p>In identification mode, always 1-bit data bus width is used. When switching from the identification mode to the data transfer mode, the data bus width is changed. In data transfer mode, the data bus width depends on the type of the used card:</p>
<ul>
<li>MMCs V3.x support 4-bit data bus width</li>
<li>MMCs V4.x support 8-bit data bus width</li>
<li>SD Memory Cards support 4-bit data bus width</li>
<li>SDIO Cards support 4-bit data bus width</li>
<li>Embedded SDIO devices support 8-bit data bus width</li>
</ul>
<p>The data bus width <code>width</code> is the minimum of the data bus width supported by the identified card and the data bus width <a class="el" href="structsdmmc__dev.html#abf7983c8fcc1dbc16b4de874f981192c">sdmmc_dev_t::bus_width</a> configured for the SDIO/SD/MMC peripheral. The low-level SDIO/SD/MMC peripheral driver is responsible for correctly setting <a class="el" href="structsdmmc__dev.html#abf7983c8fcc1dbc16b4de874f981192c">sdmmc_dev_t::bus_width</a> in the <a class="el" href="structsdmmc__driver__t.html#aa2b8f7bd321d99c509648bddba74f955">sdmmc_driver_t::init</a> function.</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="structsdmmc__driver__t.html#a14290b51beafeb5d56669a28b4906e40">set_bus_width</a> function must not change <a class="el" href="structsdmmc__dev.html#abf7983c8fcc1dbc16b4de874f981192c">sdmmc_dev_t::bus_width</a> because it is the configured data bus width which may be larger than the supported data bus width of the identified card.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">width</td><td>Data bus width to be set</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if SDIO/SD/MMC peripheral does not support the width </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01116">1116</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="a8279b6dcc834387863c42f72ba062091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8279b6dcc834387863c42f72ba062091">&#9670;&nbsp;</a></span>set_clock_rate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::set_clock_rate) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="group__drivers__sdmmc.html#ga716a46ecf3e8ad8be8401d617ea36a01">sdmmc_clock_rate_t</a> rate)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set SD CLK signal rate. </p>
<p>Set the SD CLK rate used by the SDIO/SD/MMC peripheral. The clock frequency in identification mode f_OD is fixed and is 400 kHz. The actual clock frequency in data transfer mode f_PP depends on the SDIO/SD/MMC device and the card used.</p>
<p>The function is called by the high-level SDIO/SD/MMC device API function <a class="el" href="group__drivers__sdmmc.html#ga8f38aee0dad654c7200e973ebe22a0ba">sdmmc_card_init</a> at the end of the card identification procedure with <code>rate</code> set to any of the clock rates defined in <a class="el" href="group__drivers__sdmmc.html#ga716a46ecf3e8ad8be8401d617ea36a01">sdmmc_clock_rate_t</a>. The low-level SDIO/SD/MMC peripheral is responsible to set the clock rate to the highest value it supports for the identified card type.</p>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rate</td><td>Clock rate to be set</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if SDIO/SD/MMC peripheral does not support the clock rate </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01142">1142</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="a332bc0cee951ac6c393c553a460215d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a332bc0cee951ac6c393c553a460215d5">&#9670;&nbsp;</a></span>xfer_execute</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::xfer_execute) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> *xfer, const void *data_wr, void *data_rd, uint16_t *done)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute the data transfer. </p>
<p>Low-level SDIO/SD/MMC peripheral driver function to transfer the data (read or write) by the SDIO/SD/MMC peripheral.</p>
<p>It is called by the high-level SDIO/SD/MMC device API function <a class="el" href="group__drivers__sdmmc.html#ga38efc43e662cf77e814c8b5170ce3152">sdmmc_xfer</a> after it sent the block-oriented, stream or byte/multi-byte command to start the transfer from or to the card.</p>
<p>The function returns the number of transferred blocks in <code>done</code>. Most SDIO/SD/MMC peripherals use a block or byte counter when transferring data, which can be used for this purpose.</p>
<dl class="section note"><dt>Note</dt><dd>If the SDIO/SD/MMC peripheral does not allow to determine the number of transferred blocks, the function must return <code>0</code> in <code>done</code> in case of an error or <a class="el" href="structsdmmc__xfer__desc__t.html#a68e4fe6cfe5d7b6da13423b3bfab2d4b">sdmmc_xfer_desc_t::block_num</a> on success.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__drivers__sdmmc.html#ga38efc43e662cf77e814c8b5170ce3152">sdmmc_xfer</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> and <code>xfer</code> must not be <code>NULL</code>. <br />
 <code>data_rd</code> must not be <code>NULL</code> for read transfers and <br />
 <code>data_wr</code> must not be <code>NULL</code> for write transfers.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xfer</td><td>Transfer descriptor of type <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_wr</td><td>Buffer with data to write in write transfers, NULL otherwise </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data_rd</td><td>Buffer for data to read in read transfers, NULL otherwise </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">done</td><td>Number of blocks transferred, can be <code>NULL</code></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-ENODEV</td><td>if card is not present or not usable </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if card does not support a used command or is in wrong state </td></tr>
    <tr><td class="paramname">-EBUSY</td><td>if card is busy </td></tr>
    <tr><td class="paramname">-EFAULT</td><td>on card status error </td></tr>
    <tr><td class="paramname">-ETIMEDOUT</td><td>on timeout condition </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>on invalid transfer parameters </td></tr>
    <tr><td class="paramname">-EBADMSG</td><td>on CRC7 error in data </td></tr>
    <tr><td class="paramname">-ENOMEM</td><td>on RX FIFO overflow or TX FIFO underrun error </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01231">1231</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="accc93e4916aa1e023308b1b1bf03a762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accc93e4916aa1e023308b1b1bf03a762">&#9670;&nbsp;</a></span>xfer_finish</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::xfer_finish) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> *xfer)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish the data transfer. </p>
<p>Low-level SDIO/SD/MMC peripheral driver function to terminate a data transfer (read or write) in the SDIO/SD/MMC peripheral.</p>
<p>It is called by the high-level SDIO/SD/MMC device API function <a class="el" href="group__drivers__sdmmc.html#ga38efc43e662cf77e814c8b5170ce3152">sdmmc_xfer</a> after the data transfer has been executed and the stop command (CMD12) has been sent if necessary.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__drivers__sdmmc.html#ga38efc43e662cf77e814c8b5170ce3152">sdmmc_xfer</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> and <code>xfer</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xfer</td><td>Transfer descriptor of type <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01254">1254</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<a id="a991b2731d78787fadd6c50ab7af20470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a991b2731d78787fadd6c50ab7af20470">&#9670;&nbsp;</a></span>xfer_prepare</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sdmmc_driver_t::xfer_prepare) (<a class="el" href="group__drivers__sdmmc.html#ga4206719a0d914bba965b44c5e3aac18c">sdmmc_dev_t</a> *dev, <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a> *xfer)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare a data transfer. </p>
<p>Low-level SDIO/SD/MMC peripheral driver function to prepare a data transfer (read or write) in the SDIO/SD/MMC peripheral.</p>
<p>It is called by the high-level SDIO/SD/MMC device API function <a class="el" href="group__drivers__sdmmc.html#ga38efc43e662cf77e814c8b5170ce3152">sdmmc_xfer</a> before it sends a block-oriented, stream or byte/multi-byte command to the card to start the transfer from or to the card.</p>
<p>A typical activity of this function is the configuration of the DMA transfer.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__drivers__sdmmc.html#ga38efc43e662cf77e814c8b5170ce3152">sdmmc_xfer</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>dev</code> and <code>xfer</code> must not be <code>NULL</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SDIO/SD/MMC device to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xfer</td><td>Transfer descriptor of type <a class="el" href="structsdmmc__xfer__desc__t.html">sdmmc_xfer_desc_t</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>on invalid transfer parameters </td></tr>
    <tr><td class="paramname">-EIO</td><td>on not further specified error incl. hardware errors </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sdmmc_8h_source.html#l01188">1188</a> of file <a class="el" href="sdmmc_8h_source.html">sdmmc.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>drivers/include/sdmmc/<a class="el" href="sdmmc_8h_source.html">sdmmc.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Wed Mar 12 2025 10:21:36 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
