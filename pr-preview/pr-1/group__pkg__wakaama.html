<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>LwM2M - Lightweight Machine to Machine</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__pkg__wakaama.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">LwM2M - Lightweight Machine to Machine<div class="ingroups"><a class="el" href="group__pkg.html">Packages</a> &#124; <a class="el" href="group__net.html">Networking</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>LwM2M implementation based on the Wakaama package.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>LwM2M implementation based on the Wakaama package. </p>
<p>Lightweight Machine to Machine is a device management protocol designed for sensor networks, designed for remote management of M2M devices and related service enablement. It defines an extensible resource and data model and builds top of CoAP. LwM2M has been specified by the OMA SpecWorks Device Management Working Group. The specification is freely available <a href="http://openmobilealliance.org/wp/index.html">here</a>.</p>
<p>For a list of the supported objects see <a class="el" href="group__lwm2m__objects.html">LwM2M Object implementations</a>. The client implementation is based on the Eclipse <a href="https://github.com/eclipse/wakaama">Wakaama project</a></p>
<p>A LwM2M Client organizes resources as object instances. The LwM2M engine is independent of the objects that the client exposes, but it needs at least 3 mandatory ones: <a class="el" href="group__lwm2m__objects__device.html">Device object</a>, <a class="el" href="group__lwm2m__objects__security.html">Security object</a> and a Server object.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="lwm2m__client_8h.html">lwm2m_client.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="lwm2m__client__objects_8h.html">lwm2m_client_objects.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="security_8h.html">objects/security.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="pkg_2wakaama_2include_2objects_2device_8h.html">objects/device.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="credman_8h.html">net/credman.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// hold references to object handles</span></div><div class="line">lwm2m_object_t *obj_list[3];</div><div class="line"></div><div class="line"><span class="comment">// LwM2M Client instance</span></div><div class="line"><a class="code" href="structlwm2m__client__data__t.html">lwm2m_client_data_t</a> client_data;</div><div class="line"></div><div class="line"><span class="comment">// short ID for internal reference of the server</span></div><div class="line"><span class="preprocessor">#define CONFIG_LWM2M_SERVER_SHORT_ID 1</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line"></div><div class="line">   <span class="comment">// initiate the LwM2M Client</span></div><div class="line">   <a class="code" href="group__lwm2m__client.html#ga7496736a9754f07edea52b0e4ab2e9c4">lwm2m_client_init</a>(&amp;client_data);</div><div class="line"></div><div class="line">   <span class="comment">// arguments for instantiating a security object</span></div><div class="line">   <a class="code" href="structlwm2m__obj__security__args.html">lwm2m_obj_security_args_t</a> args = {</div><div class="line">       .<a class="code" href="structlwm2m__obj__security__args.html#a0cf6e9a4f384dd2e27277b67e3e45a12">server_id</a> = CONFIG_LWM2M_SERVER_SHORT_ID,</div><div class="line">       .server_uri = <span class="stringliteral">&quot;coap://[fd00:dead:beef::1]:5683&quot;</span>,</div><div class="line">       .security_mode = <a class="code" href="group__lwm2m__objects__security.html#ga70a6f5afd228e42a5ed0494276df1e21">LWM2M_SECURITY_MODE_NONE</a>,</div><div class="line">       .is_bootstrap = <span class="keyword">false</span>,</div><div class="line">       .client_hold_off_time = 5,</div><div class="line">       .bootstrap_account_timeout = 0</div><div class="line">   };</div><div class="line"></div><div class="line">   <span class="comment">// get the Security object handle</span></div><div class="line">   obj_list[0] = <a class="code" href="group__lwm2m__objects__security.html#gae5a6e40dd869d736e680cc5b063200ab">lwm2m_object_security_init</a>(&amp;client_data);</div><div class="line"></div><div class="line">   <span class="comment">// create a new Security object instance</span></div><div class="line">   <span class="keywordtype">int</span> res = <a class="code" href="group__lwm2m__objects__security.html#gafd3eaae1ec622a3529f7963acc166a4f">lwm2m_object_security_instance_create</a>(&amp;args, 1);</div><div class="line">   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line">       puts(<span class="stringliteral">&quot;Could not instantiate the security object&quot;</span>);</div><div class="line">       <span class="keywordflow">return</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// get the Server object handle (only single instance for now)</span></div><div class="line">   obj_list[1] = <a class="code" href="lwm2m__client__objects_8h.html#aa737ac8e9fc50ab95a178afa89b99239">lwm2m_client_get_server_object</a>(&amp;client_data, CONFIG_LWM2M_SERVER_SHORT_ID);</div><div class="line"></div><div class="line">   <span class="comment">// device object has a single instance. All the information for now is defined at compile-time</span></div><div class="line">   obj_list[2] = <a class="code" href="group__lwm2m__objects__device.html#ga7d4be3717c0402ffc5e1931fb287bf35">lwm2m_object_device_init</a>(&amp;client_data);</div><div class="line"></div><div class="line">   <span class="comment">// run the LwM2M client</span></div><div class="line">   <a class="code" href="group__lwm2m__client.html#ga91cd7f15fad4b58114bb75a946297336">lwm2m_client_run</a>(&amp;client_data, obj_list, <a class="code" href="container_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(obj_list);</div><div class="line">}</div></div><!-- fragment --><p>The LwM2M Client will connect to the specified LwM2M server and register itself. After that, the server will be able to perform Read, Write, Create, Delete, Execute and Observe operations on the resources.</p>
<p>With the configuration above plain CoAP is used. To secure the connection with the LwM2M Server, a credential is needed in the Security object instance. To enable DTLS support add the module <code>wakaama_client_dtls</code>. This uses the <a class="el" href="group__net__sock__dtls.html">DTLS sock API</a>, so you will need to select an implementation of it (e.g. <code>USEPKG += tinydtls</code>). Currently Pre-Shared Key (PSK) and Raw Public Key (RPK) modes are supported.</p>
<p>To see how to use DTLS credentials, go to the usage section of <a class="el" href="group__lwm2m__objects__security.html">Security LwM2M object</a>.</p>
<p>A bootstrap server gives a LwM2M deployment more flexibility. Information on how to connect to the LwM2M bootstrap server is defined at compile-time in the client (including URI and potentially needed credentials). The client connects to the bootstrap server on boot, which installs on the node the information needed to connect to the LwM2M servers.</p>
<p>To enable bootstrap support, set the <code>LWM2M_BOOTSTRAP</code> option on Kconfig or set the CFLAG <code>CONFIG_LWM2M_BOOTSTRAP=1</code>. You will also need to specify during the security object instantiation that the information corresponds to a bootstrap server. DTLS is also supported for the bootstrap server:</p>
<div class="fragment"><div class="line"><a class="code" href="structlwm2m__obj__security__args.html">lwm2m_obj_security_args_t</a> args = {</div><div class="line">    .<a class="code" href="structlwm2m__obj__security__args.html#a0cf6e9a4f384dd2e27277b67e3e45a12">server_id</a> = 1,</div><div class="line">    .server_uri = <span class="stringliteral">&quot;coaps://[fd00:dead:beef::1]:5684&quot;</span>,</div><div class="line">    .security_mode = <a class="code" href="group__lwm2m__objects__security.html#ga15d86892263343d84b480e9072da09b2">LWM2M_SECURITY_MODE_PRE_SHARED_KEY</a>,</div><div class="line">    .pub_key_or_id = psk_id,</div><div class="line">    .pub_key_or_id_len = <span class="keyword">sizeof</span>(psk_id) - 1,</div><div class="line">    .secret_key = psk_key,</div><div class="line">    .secret_key_len = <span class="keyword">sizeof</span>(psk_key) - 1,</div><div class="line">    .is_bootstrap = <span class="keyword">true</span>,</div><div class="line">    .client_hold_off_time = 5,</div><div class="line">    .bootstrap_account_timeout = 0</div><div class="line">};</div></div><!-- fragment --><p>Keep into account, that some Sock DTLS implementations may need some extra configuration to handle multiple connections. See the <code>example/wakaama</code> Makefile. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__lwm2m__objects__common"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lwm2m__objects__common.html">Common LwM2M Object functionalities</a></td></tr>
<tr class="memdesc:group__lwm2m__objects__common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common functionalities to interact with LwM2M objects. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__lwm2m__client"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lwm2m__client.html">LwM2M Client using Wakaama</a></td></tr>
<tr class="memdesc:group__lwm2m__client"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakaama adaption to RIOT for implementing a LwM2M client. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__lwm2m__objects"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lwm2m__objects.html">LwM2M Object implementations</a></td></tr>
<tr class="memdesc:group__lwm2m__objects"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementations of LwM2M objects using Wakaama. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__lwm2m__platform"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lwm2m__platform.html">Platform adaption for Wakaama package</a></td></tr>
<tr class="memdesc:group__lwm2m__platform"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adaption of Wakaama LwM2M package to RIOT. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__lwm2m__client__config"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lwm2m__client__config.html">Wakaama LwM2M Client configuration</a></td></tr>
<tr class="memdesc:group__lwm2m__client__config"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration options for the LwM2M client implementation based on the Wakaama package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Wed Mar 12 2025 10:21:32 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
