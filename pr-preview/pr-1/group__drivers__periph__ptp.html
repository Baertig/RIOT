<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>PTP-Clock</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__drivers__periph__ptp.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PTP-Clock<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a> &raquo; <a class="el" href="group__drivers__periph.html">Peripheral Driver Interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Low-level PTP clock peripheral driver.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Low-level PTP clock peripheral driver. </p>
<h1><a class="anchor" id="autotoc_md1732"></a>
Introduction</h1>
<p>The <a href="https://standards.ieee.org/content/ieee-standards/en/standard/1588-2019.html">Precision Time Protocol (PTP)</a> can be used to synchronize clocks with hardware support in an Ethernet PHY, that allows to precisely estimate (and, thus, compensate) network delay between time server and client. This allows PTP synchronization to be highly accurate (&lt;&lt; 1 Âµs offset between server and client), but requires hardware support on each synchronized node and the PTP server, all nodes to be connected to the same* Ethernet network, and (for best results) hardware support in all intermediate switches.</p>
<h1><a class="anchor" id="autotoc_md1733"></a>
(No) Synchronization Using This API</h1>
<p>This API is intended to provide basic access to a PTP hardware clock. This does not cover any synchronization. Some PTP hardware clocks (e.g. on the STM32) can be used without synchronization by manually setting the time. Thus, the PTP clock can be useful even without synchronization implemented.</p>
<p>It is intended that the actual synchronization is implemented externally later on. The functions <a class="el" href="group__drivers__periph__ptp.html#gadf6f865c88a6ed893bd77ae813ef892b">ptp_clock_adjust</a> and <a class="el" href="group__drivers__periph__ptp.html#ga70461154180e423d2084ee56a0b42be9">ptp_clock_adjust_speed</a> are specified with the needs of a synchronization solution in mind.</p>
<h1><a class="anchor" id="autotoc_md1734"></a>
Clock vs Timer</h1>
<p>This API provides both <code>ptp_clock_*()</code> and <code>ptp_timer_*()</code> functions, to distinguish between the feature set being used. A PTP peripheral might only support the feature <code>periph_ptp</code>, but not <code>periph_ptp_timer</code>.</p>
<h1><a class="anchor" id="autotoc_md1735"></a>
(Lack of) Power Considerations</h1>
<p>It is assumed that a board connected to a wired network is also powered from mains. Additionally, a high-resolution high-accuracy clock that is periodically synced over network is just not going to play well with low-power application scenarios. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:ptp_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptp_8h.html">ptp.h</a></td></tr>
<tr class="memdesc:ptp_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level PTP clock peripheral driver interface definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A PTP timestamp in seconds + nanoseconds since UNIX epoch.  <a href="structptp__timestamp__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga18326e1117400ac2e3fbedff671d3339"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga18326e1117400ac2e3fbedff671d3339">ptp_seconds_t</a></td></tr>
<tr class="memdesc:ga18326e1117400ac2e3fbedff671d3339"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsigned integer type to store seconds since epoch for use in PTP.  <a href="#ga18326e1117400ac2e3fbedff671d3339">More...</a><br /></td></tr>
<tr class="separator:ga18326e1117400ac2e3fbedff671d3339"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga60a2ab67c2548ab8242be3c6d6e7f3a8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga60a2ab67c2548ab8242be3c6d6e7f3a8">ptp_cmp</a> (const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *a, const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *b)</td></tr>
<tr class="memdesc:ga60a2ab67c2548ab8242be3c6d6e7f3a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two PTP timestamps.  <a href="#ga60a2ab67c2548ab8242be3c6d6e7f3a8">More...</a><br /></td></tr>
<tr class="separator:ga60a2ab67c2548ab8242be3c6d6e7f3a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06210d644b7a481f711a611889cb314b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga06210d644b7a481f711a611889cb314b">ptp_add</a> (<a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *t, int64_t offset)</td></tr>
<tr class="memdesc:ga06210d644b7a481f711a611889cb314b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a given offset onto the given timestamp.  <a href="#ga06210d644b7a481f711a611889cb314b">More...</a><br /></td></tr>
<tr class="separator:ga06210d644b7a481f711a611889cb314b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1040816d3338330c53b7ea13068d4fd7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga1040816d3338330c53b7ea13068d4fd7">ptp_ns2ts</a> (<a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *dest, uint64_t ns_since_epoch)</td></tr>
<tr class="memdesc:ga1040816d3338330c53b7ea13068d4fd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert time from nanoseconds since epoch to <a class="el" href="structptp__timestamp__t.html" title="A PTP timestamp in seconds + nanoseconds since UNIX epoch. ">ptp_timestamp_t</a> format.  <a href="#ga1040816d3338330c53b7ea13068d4fd7">More...</a><br /></td></tr>
<tr class="separator:ga1040816d3338330c53b7ea13068d4fd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7cff5f666a78aac1d5a7e35f9ee5f59"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#gaf7cff5f666a78aac1d5a7e35f9ee5f59">ptp_ts2ns</a> (const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *t)</td></tr>
<tr class="memdesc:gaf7cff5f666a78aac1d5a7e35f9ee5f59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert time from nanoseconds since epoch to <a class="el" href="structptp__timestamp__t.html" title="A PTP timestamp in seconds + nanoseconds since UNIX epoch. ">ptp_timestamp_t</a> format.  <a href="#gaf7cff5f666a78aac1d5a7e35f9ee5f59">More...</a><br /></td></tr>
<tr class="separator:gaf7cff5f666a78aac1d5a7e35f9ee5f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae18f652fb2102235587eef7a2be224ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#gae18f652fb2102235587eef7a2be224ee">ptp_init</a> (void)</td></tr>
<tr class="memdesc:gae18f652fb2102235587eef7a2be224ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the given PTP peripheral.  <a href="#gae18f652fb2102235587eef7a2be224ee">More...</a><br /></td></tr>
<tr class="separator:gae18f652fb2102235587eef7a2be224ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70461154180e423d2084ee56a0b42be9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga70461154180e423d2084ee56a0b42be9">ptp_clock_adjust_speed</a> (int32_t correction)</td></tr>
<tr class="memdesc:ga70461154180e423d2084ee56a0b42be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the PTP clock speed as given.  <a href="#ga70461154180e423d2084ee56a0b42be9">More...</a><br /></td></tr>
<tr class="separator:ga70461154180e423d2084ee56a0b42be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf6f865c88a6ed893bd77ae813ef892b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#gadf6f865c88a6ed893bd77ae813ef892b">ptp_clock_adjust</a> (int64_t offset)</td></tr>
<tr class="memdesc:gadf6f865c88a6ed893bd77ae813ef892b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the PTP clock as given.  <a href="#gadf6f865c88a6ed893bd77ae813ef892b">More...</a><br /></td></tr>
<tr class="separator:gadf6f865c88a6ed893bd77ae813ef892b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78d7d848fa18998720db93750cf1ec05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga78d7d848fa18998720db93750cf1ec05">ptp_clock_read</a> (<a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *timestamp)</td></tr>
<tr class="memdesc:ga78d7d848fa18998720db93750cf1ec05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current system time as PTP timestamp.  <a href="#ga78d7d848fa18998720db93750cf1ec05">More...</a><br /></td></tr>
<tr class="separator:ga78d7d848fa18998720db93750cf1ec05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67e73d24477af86c0d43a0c65702d233"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga67e73d24477af86c0d43a0c65702d233">ptp_clock_read_u64</a> (void)</td></tr>
<tr class="memdesc:ga67e73d24477af86c0d43a0c65702d233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current system time in nanosecond since UNIX epoch.  <a href="#ga67e73d24477af86c0d43a0c65702d233">More...</a><br /></td></tr>
<tr class="separator:ga67e73d24477af86c0d43a0c65702d233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96cfad272a14a69e8a2a21f4feb1aed9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga96cfad272a14a69e8a2a21f4feb1aed9">ptp_clock_set</a> (const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *time)</td></tr>
<tr class="memdesc:ga96cfad272a14a69e8a2a21f4feb1aed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current system time.  <a href="#ga96cfad272a14a69e8a2a21f4feb1aed9">More...</a><br /></td></tr>
<tr class="separator:ga96cfad272a14a69e8a2a21f4feb1aed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b65b08d8ec490a1ca8914a17494b7d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga2b65b08d8ec490a1ca8914a17494b7d0">ptp_clock_set_u64</a> (uint64_t ns_since_epoch)</td></tr>
<tr class="memdesc:ga2b65b08d8ec490a1ca8914a17494b7d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current system time in nanosecond since UNIX epoch.  <a href="#ga2b65b08d8ec490a1ca8914a17494b7d0">More...</a><br /></td></tr>
<tr class="separator:ga2b65b08d8ec490a1ca8914a17494b7d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4816153268e3ab3d4e4ff2ee8ab8425"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#gaa4816153268e3ab3d4e4ff2ee8ab8425">ptp_timer_cb</a> (void)</td></tr>
<tr class="memdesc:gaa4816153268e3ab3d4e4ff2ee8ab8425"><td class="mdescLeft">&#160;</td><td class="mdescRight">External function to call when the PTP clock timer fired.  <a href="#gaa4816153268e3ab3d4e4ff2ee8ab8425">More...</a><br /></td></tr>
<tr class="separator:gaa4816153268e3ab3d4e4ff2ee8ab8425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7aca6b37425dc052ccf12a4bdf6b054a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga7aca6b37425dc052ccf12a4bdf6b054a">ptp_timer_set_absolute</a> (const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *target)</td></tr>
<tr class="memdesc:ga7aca6b37425dc052ccf12a4bdf6b054a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an absolute timeout value, possibly overwriting an existing timeout.  <a href="#ga7aca6b37425dc052ccf12a4bdf6b054a">More...</a><br /></td></tr>
<tr class="separator:ga7aca6b37425dc052ccf12a4bdf6b054a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b7b74bc434a5ec96f439d22697c74b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga6b7b74bc434a5ec96f439d22697c74b5">ptp_timer_set_absolute_u64</a> (uint64_t target)</td></tr>
<tr class="memdesc:ga6b7b74bc434a5ec96f439d22697c74b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an absolute timeout value, possibly overwriting an existing timeout.  <a href="#ga6b7b74bc434a5ec96f439d22697c74b5">More...</a><br /></td></tr>
<tr class="separator:ga6b7b74bc434a5ec96f439d22697c74b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03812aa5adece70e82398147fce1d517"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#ga03812aa5adece70e82398147fce1d517">ptp_timer_set_u64</a> (uint64_t target)</td></tr>
<tr class="memdesc:ga03812aa5adece70e82398147fce1d517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an relative timeout value, possibly overwriting an existing timeout.  <a href="#ga03812aa5adece70e82398147fce1d517">More...</a><br /></td></tr>
<tr class="separator:ga03812aa5adece70e82398147fce1d517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb883c9c10b6593f3c0e377f45cbe8da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__ptp.html#gadb883c9c10b6593f3c0e377f45cbe8da">ptp_timer_clear</a> (void)</td></tr>
<tr class="memdesc:gadb883c9c10b6593f3c0e377f45cbe8da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears any pending timeout on the PTP timer.  <a href="#gadb883c9c10b6593f3c0e377f45cbe8da">More...</a><br /></td></tr>
<tr class="separator:gadb883c9c10b6593f3c0e377f45cbe8da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga18326e1117400ac2e3fbedff671d3339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18326e1117400ac2e3fbedff671d3339">&#9670;&nbsp;</a></span>ptp_seconds_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group__drivers__periph__ptp.html#ga18326e1117400ac2e3fbedff671d3339">ptp_seconds_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsigned integer type to store seconds since epoch for use in PTP. </p>
<p>The PTP protocol defines the seconds part of PTP timestamps as an 48 bit unsigned integer. We go for 32 bit for now (works until year 2106) and will later extend this type to 64 bit. Users are highly encouraged to use this type instead of <code>uint32_t</code>, if they intent that their software still works in a couple of decades. </p>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00093">93</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga06210d644b7a481f711a611889cb314b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06210d644b7a481f711a611889cb314b">&#9670;&nbsp;</a></span>ptp_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a given offset onto the given timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">t</td><td>Timestamp to add offset to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Offset to apply </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00145">145</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="gadf6f865c88a6ed893bd77ae813ef892b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf6f865c88a6ed893bd77ae813ef892b">&#9670;&nbsp;</a></span>ptp_clock_adjust()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptp_clock_adjust </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the PTP clock as given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>Offset to add onto current system time</td></tr>
  </table>
  </dd>
</dl>
<p>Same as <code>ptp_clock_set_u64(<a class="el" href="group__drivers__periph__ptp.html#ga67e73d24477af86c0d43a0c65702d233" title="Get the current system time in nanosecond since UNIX epoch. ">ptp_clock_read_u64()</a> + offset)</code>, but implemented to introduce as little error as possible while setting the offset. This is intended to be used by clock synchronization implementations. </p>

</div>
</div>
<a id="ga70461154180e423d2084ee56a0b42be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70461154180e423d2084ee56a0b42be9">&#9670;&nbsp;</a></span>ptp_clock_adjust_speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptp_clock_adjust_speed </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>correction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the PTP clock speed as given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">correction</td><td>Specification of the clock speed adjustment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This implies feature <code>periph_ptp_speed_adjustment</code></dd></dl>
<p>The clock speed is adjusted in regard to its nominal clock speed. This means that calls with the same value in <code>correction</code> are idempotent.</p>
<ol type="1">
<li>A call with <code>correction</code> set to <code>0</code> restores the nominal clock speed.</li>
<li>A call with a positive value for <code>correction</code> speeds the clock up by <code>correction / (1 &lt;&lt; 32)</code> (so up to ~50% for <code>INT32_MAX</code>).</li>
<li>A call with a negative value for <code>correction</code> slows the clock down by <code>-correction / (1 &lt;&lt; 32)</code> (so up to 50% for <code>INT32_MIN</code>).</li>
</ol>
<p>This allows the clock speed to be adjusted in steps Â± 2.3284E-08 % in relation to its nominal clock speed, thus, allowing to counter systematic clock drift. In addition, this is intended to "smoothly" synchronize the clock over time to avoid jumps in the system time. (Especially calling <a class="el" href="group__drivers__periph__ptp.html#gadf6f865c88a6ed893bd77ae813ef892b">ptp_clock_adjust</a> with negative values might be something to avoid, when applications are not prepared with clocks going backwards.) </p>

</div>
</div>
<a id="ga78d7d848fa18998720db93750cf1ec05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78d7d848fa18998720db93750cf1ec05">&#9670;&nbsp;</a></span>ptp_clock_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_clock_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>timestamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current system time as PTP timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">timestamp</td><td>The timestamp will be written here </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The PTP clock is initialized </dd></dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00356">356</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="ga67e73d24477af86c0d43a0c65702d233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67e73d24477af86c0d43a0c65702d233">&#9670;&nbsp;</a></span>ptp_clock_read_u64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t ptp_clock_read_u64 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current system time in nanosecond since UNIX epoch. </p>
<dl class="section return"><dt>Returns</dt><dd>Nanoseconds since 1. 1. 1970 0:00:00 UTC</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The PTP clock is initialized</dd></dl>
<dl class="section note"><dt>Note</dt><dd>An <code>uint64_t</code> allows nanosecond timestamps within 1970-01-01 and 2554-07-21 to be represented. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00363">363</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="ga96cfad272a14a69e8a2a21f4feb1aed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96cfad272a14a69e8a2a21f4feb1aed9">&#9670;&nbsp;</a></span>ptp_clock_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_clock_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the current system time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>The new system time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The PTP clock is initialized </dd></dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00372">372</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="ga2b65b08d8ec490a1ca8914a17494b7d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b65b08d8ec490a1ca8914a17494b7d0">&#9670;&nbsp;</a></span>ptp_clock_set_u64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_clock_set_u64 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ns_since_epoch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the current system time in nanosecond since UNIX epoch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ns_since_epoch</td><td>New time to set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The PTP clock is initialized </dd></dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00379">379</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="ga60a2ab67c2548ab8242be3c6d6e7f3a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60a2ab67c2548ab8242be3c6d6e7f3a8">&#9670;&nbsp;</a></span>ptp_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ptp_cmp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare two PTP timestamps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>First timestamp </td></tr>
    <tr><td class="paramname">b</td><td>Second timestamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td><code>a</code> &lt; <code>b</code> </td></tr>
    <tr><td class="paramname">0</td><td><code>a</code> == <code>b</code> </td></tr>
    <tr><td class="paramname">1</td><td><code>a</code> &gt; <code>b</code> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00118">118</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="gae18f652fb2102235587eef7a2be224ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae18f652fb2102235587eef7a2be224ee">&#9670;&nbsp;</a></span>ptp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptp_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the given PTP peripheral. </p>
<dl class="section note"><dt>Note</dt><dd>Implementations of this functions have to use <code><a class="el" href="assert_8h.html#a3153a272f18d0f805028fce7e4337b53" title="abort the program if assertion is false ">assert()</a></code> to make the configuration is valid.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>This function must be called at most once</dd></dl>
<p>After calling this, the PTP clock (and the PTP timer, if the feature <code>periph_ptp_timer</code> is used in addition to <code>periph_ptp_clock</code>) can be used. </p>

</div>
</div>
<a id="ga1040816d3338330c53b7ea13068d4fd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1040816d3338330c53b7ea13068d4fd7">&#9670;&nbsp;</a></span>ptp_ns2ts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_ns2ts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ns_since_epoch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert time from nanoseconds since epoch to <a class="el" href="structptp__timestamp__t.html" title="A PTP timestamp in seconds + nanoseconds since UNIX epoch. ">ptp_timestamp_t</a> format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>The timestamp will be written here </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ns_since_epoch</td><td>Time in nanoseconds since epoch to convert </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00176">176</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="gaa4816153268e3ab3d4e4ff2ee8ab8425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4816153268e3ab3d4e4ff2ee8ab8425">&#9670;&nbsp;</a></span>ptp_timer_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptp_timer_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>External function to call when the PTP clock timer fired. </p>
<dl class="section note"><dt>Note</dt><dd>This function needs to be implemented by the <em>user</em> of this API </dd>
<dd>
This function implies feature <code>periph_ptp_timer</code></dd></dl>
<p>Since at most one PTP clock is expected on each board, we can avoid the overhead of indirect function calls here and let users of this API just implement this function. </p>

</div>
</div>
<a id="gadb883c9c10b6593f3c0e377f45cbe8da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb883c9c10b6593f3c0e377f45cbe8da">&#9670;&nbsp;</a></span>ptp_timer_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptp_timer_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears any pending timeout on the PTP timer. </p>
<dl class="section note"><dt>Note</dt><dd>This function implies feature <code>periph_ptp_timer</code> </dd></dl>

</div>
</div>
<a id="ga7aca6b37425dc052ccf12a4bdf6b054a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7aca6b37425dc052ccf12a4bdf6b054a">&#9670;&nbsp;</a></span>ptp_timer_set_absolute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_timer_set_absolute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set an absolute timeout value, possibly overwriting an existing timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Timestamp when the timeout should fire</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Only a single timeout is supported by the PTP timer </dd>
<dd>
This function implies feature <code>periph_ptp_timer</code></dd></dl>
<p>If the target time is in the past or equal to the current time, the IRQ should trigger right away. </p>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00388">388</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="ga6b7b74bc434a5ec96f439d22697c74b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6b7b74bc434a5ec96f439d22697c74b5">&#9670;&nbsp;</a></span>ptp_timer_set_absolute_u64()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ptp_timer_set_absolute_u64 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set an absolute timeout value, possibly overwriting an existing timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Timestamp when the timeout should fire (ns since epoch)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Only a single timeout is supported by the PTP timer </dd>
<dd>
This function implies feature <code>periph_ptp_timer</code></dd></dl>
<p>If the target time is in the past or equal to the current time, the IRQ should trigger right away. </p>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00395">395</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
<a id="ga03812aa5adece70e82398147fce1d517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03812aa5adece70e82398147fce1d517">&#9670;&nbsp;</a></span>ptp_timer_set_u64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ptp_timer_set_u64 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an relative timeout value, possibly overwriting an existing timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>Number of nanoseconds after which the timeout should fire</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Only a single timeout is supported by the PTP timer </dd>
<dd>
This function implies feature <code>periph_ptp_timer</code> </dd></dl>

</div>
</div>
<a id="gaf7cff5f666a78aac1d5a7e35f9ee5f59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf7cff5f666a78aac1d5a7e35f9ee5f59">&#9670;&nbsp;</a></span>ptp_ts2ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t ptp_ts2ns </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structptp__timestamp__t.html">ptp_timestamp_t</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert time from nanoseconds since epoch to <a class="el" href="structptp__timestamp__t.html" title="A PTP timestamp in seconds + nanoseconds since UNIX epoch. ">ptp_timestamp_t</a> format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">t</td><td>Time to convert to nanoseconds since epoch</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The time specified by <code>t</code> in nanoseconds since epoch </dd></dl>

<p class="definition">Definition at line <a class="el" href="ptp_8h_source.html#l00189">189</a> of file <a class="el" href="ptp_8h_source.html">ptp.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Thu Mar 13 2025 10:38:33 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
