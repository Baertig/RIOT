<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Flash page driver</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__drivers__periph__flashpage.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Flash page driver<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a> &raquo; <a class="el" href="group__drivers__periph.html">Peripheral Driver Interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Low-level flash page interface.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Low-level flash page interface. </p>
<p>This interface provides a very simple and straight forward way for writing a MCU's internal flash. This interface is only capable of reading, verifying, and writing complete flash pages, it has no support for partial flash access. This enables for very slim and efficient implementations.</p>
<p>A module for more fine-grained access of memory locations can easily be programmed on top of this interface.</p>
<dl class="section note"><dt>Note</dt><dd>Flash memory has only a limited amount of erase cycles (mostly around 10K times), so using this interface in some kind of loops can damage you MCU!</dd></dl>
<h1><a class="anchor" id="autotoc_md1726"></a>
(Low-) Power Implications</h1>
<p>The flashpage driver implementation <b>should</b> make sure, that the CPU uses no additional energy while the flashpage driver is inactive. This means, that any particular CPU peripherals used for reading and writing flash pages <b>should</b> be disabled before the read and write functions return.</p>
<p>If an implementation puts the calling thread to sleep for a duration of time, the implementation might need to take care of blocking certain power modes. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:flashpage_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flashpage_8h.html">flashpage.h</a></td></tr>
<tr class="memdesc:flashpage_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level flash page peripheral driver interface. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad33eb792f7cf98b55b73fea8239c5f45"><td class="memItemLeft" align="right" valign="top"><a id="gad33eb792f7cf98b55b73fea8239c5f45"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gad33eb792f7cf98b55b73fea8239c5f45">CPU_FLASH_BASE</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:gad33eb792f7cf98b55b73fea8239c5f45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per default, we expect the internal flash to start at address 0. <br /></td></tr>
<tr class="separator:gad33eb792f7cf98b55b73fea8239c5f45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16753047dc8ea05da311dd4e5e056628"><td class="memItemLeft" align="right" valign="top"><a id="ga16753047dc8ea05da311dd4e5e056628"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga16753047dc8ea05da311dd4e5e056628">FLASHPAGE_WRITE_BLOCK_SIZE</a></td></tr>
<tr class="memdesc:ga16753047dc8ea05da311dd4e5e056628"><td class="mdescLeft">&#160;</td><td class="mdescRight">For raw writings to the flash, this constant must define the minimum write length allowed by the MCU. <br /></td></tr>
<tr class="separator:ga16753047dc8ea05da311dd4e5e056628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72c89204ecbd5efc8d52d3bd73003a28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga72c89204ecbd5efc8d52d3bd73003a28">FLASHPAGE_WRITE_BLOCK_ALIGNMENT</a></td></tr>
<tr class="memdesc:ga72c89204ecbd5efc8d52d3bd73003a28"><td class="mdescLeft">&#160;</td><td class="mdescRight">The buffers to be written to the flash MUST be aligned, as well as the address on which the buffer is written to the flash.  <a href="#ga72c89204ecbd5efc8d52d3bd73003a28">More...</a><br /></td></tr>
<tr class="separator:ga72c89204ecbd5efc8d52d3bd73003a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad528f0fc287d8630f38906843b45eea"><td class="memItemLeft" align="right" valign="top"><a id="gaad528f0fc287d8630f38906843b45eea"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gaad528f0fc287d8630f38906843b45eea">FLASHPAGE_ERASE_STATE</a>&#160;&#160;&#160;(0xFFU)</td></tr>
<tr class="memdesc:gaad528f0fc287d8630f38906843b45eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">State of an erased byte in memory. <br /></td></tr>
<tr class="separator:gaad528f0fc287d8630f38906843b45eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8571c7ea34cc4acdf5a035b72c1e9f12"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga8571c7ea34cc4acdf5a035b72c1e9f12">PERIPH_FLASHPAGE_CUSTOM_PAGESIZES</a></td></tr>
<tr class="memdesc:ga8571c7ea34cc4acdf5a035b72c1e9f12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defined to signal that the peripheral has non-uniform flash page sizes.  <a href="#ga8571c7ea34cc4acdf5a035b72c1e9f12">More...</a><br /></td></tr>
<tr class="separator:ga8571c7ea34cc4acdf5a035b72c1e9f12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04f3900e96060091b1df50901f44513b"><td class="memItemLeft" align="right" valign="top"><a id="ga04f3900e96060091b1df50901f44513b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga04f3900e96060091b1df50901f44513b">PERIPH_FLASHPAGE_NEEDS_FLASHPAGE_ADDR</a></td></tr>
<tr class="memdesc:ga04f3900e96060091b1df50901f44513b"><td class="mdescLeft">&#160;</td><td class="mdescRight">If non-uniform flash page sizes are required, defined to signal that the peripheral does not implement a custom <a class="el" href="group__drivers__periph__flashpage.html#gab2fa8e81e8c623f72436cdb0f860f36f">flashpage_addr</a> function and instead relies on the generic helper function that relies on <a class="el" href="group__drivers__periph__flashpage.html#gaae77fe2e674ff139e0cad902cad3f19f">flashpage_size</a>. <br /></td></tr>
<tr class="separator:ga04f3900e96060091b1df50901f44513b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8ed0a2fc0339200d46c381eed6d760f"><td class="memItemLeft" align="right" valign="top"><a id="gad8ed0a2fc0339200d46c381eed6d760f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gad8ed0a2fc0339200d46c381eed6d760f">PERIPH_FLASHPAGE_NEEDS_FLASHPAGE_PAGE</a></td></tr>
<tr class="memdesc:gad8ed0a2fc0339200d46c381eed6d760f"><td class="mdescLeft">&#160;</td><td class="mdescRight">If non-uniform flash page sizes are required, defined to signal that the peripheral does not implement a custom <a class="el" href="group__drivers__periph__flashpage.html#gac95d86b4e651d7b5c75354aad5701206">flashpage_page</a> function and instead relies on the generic helper function that relies on <a class="el" href="group__drivers__periph__flashpage.html#gaae77fe2e674ff139e0cad902cad3f19f">flashpage_size</a>. <br /></td></tr>
<tr class="separator:gad8ed0a2fc0339200d46c381eed6d760f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga951d0ea82c1cd088012f04eaa4190fa8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga951d0ea82c1cd088012f04eaa4190fa8">FLASH_WRITABLE_INIT</a>(name,  size)</td></tr>
<tr class="memdesc:ga951d0ea82c1cd088012f04eaa4190fa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define an array in flash memory.  <a href="#ga951d0ea82c1cd088012f04eaa4190fa8">More...</a><br /></td></tr>
<tr class="separator:ga951d0ea82c1cd088012f04eaa4190fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga2ed332df4696233768771e93d4081c3f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="group__drivers__periph__flashpage.html#gga2ed332df4696233768771e93d4081c3fabbfd3aff1792ce2d3654c849684ee52b">FLASHPAGE_OK</a> = 0, 
<a class="el" href="group__drivers__periph__flashpage.html#gga2ed332df4696233768771e93d4081c3fa5b88341d18672e0b3ad3b34e6b9ffd90">FLASHPAGE_NOMATCH</a> = -1
 }</td></tr>
<tr class="memdesc:ga2ed332df4696233768771e93d4081c3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return values used in this interface.  <a href="group__drivers__periph__flashpage.html#ga2ed332df4696233768771e93d4081c3f">More...</a><br /></td></tr>
<tr class="separator:ga2ed332df4696233768771e93d4081c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaae77fe2e674ff139e0cad902cad3f19f"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gaae77fe2e674ff139e0cad902cad3f19f">flashpage_size</a> (unsigned page)</td></tr>
<tr class="memdesc:gaae77fe2e674ff139e0cad902cad3f19f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the page size of the given page number.  <a href="#gaae77fe2e674ff139e0cad902cad3f19f">More...</a><br /></td></tr>
<tr class="separator:gaae77fe2e674ff139e0cad902cad3f19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2fa8e81e8c623f72436cdb0f860f36f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gab2fa8e81e8c623f72436cdb0f860f36f">flashpage_addr</a> (unsigned page)</td></tr>
<tr class="memdesc:gab2fa8e81e8c623f72436cdb0f860f36f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate the given page number into the page's starting address.  <a href="#gab2fa8e81e8c623f72436cdb0f860f36f">More...</a><br /></td></tr>
<tr class="separator:gab2fa8e81e8c623f72436cdb0f860f36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac95d86b4e651d7b5c75354aad5701206"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gac95d86b4e651d7b5c75354aad5701206">flashpage_page</a> (const void *addr)</td></tr>
<tr class="memdesc:gac95d86b4e651d7b5c75354aad5701206"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate the given address into the corresponding page number.  <a href="#gac95d86b4e651d7b5c75354aad5701206">More...</a><br /></td></tr>
<tr class="separator:gac95d86b4e651d7b5c75354aad5701206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52f96ad7308632eecf400fce6230c1ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga52f96ad7308632eecf400fce6230c1ca">flashpage_erase</a> (unsigned page)</td></tr>
<tr class="memdesc:ga52f96ad7308632eecf400fce6230c1ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase the given page.  <a href="#ga52f96ad7308632eecf400fce6230c1ca">More...</a><br /></td></tr>
<tr class="separator:ga52f96ad7308632eecf400fce6230c1ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf894a3072f60d91d76ada0d68e848102"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gaf894a3072f60d91d76ada0d68e848102">flashpage_write_page</a> (unsigned page, const void *data)</td></tr>
<tr class="memdesc:gaf894a3072f60d91d76ada0d68e848102"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the given page with the given data.  <a href="#gaf894a3072f60d91d76ada0d68e848102">More...</a><br /></td></tr>
<tr class="separator:gaf894a3072f60d91d76ada0d68e848102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3889412c4191fb47743f00407329a90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gab3889412c4191fb47743f00407329a90">flashpage_write</a> (void *target_addr, const void *data, size_t len)</td></tr>
<tr class="memdesc:gab3889412c4191fb47743f00407329a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write any number of data bytes to a given location in the flash memory.  <a href="#gab3889412c4191fb47743f00407329a90">More...</a><br /></td></tr>
<tr class="separator:gab3889412c4191fb47743f00407329a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae25acd49288194374218e33e825816ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#gae25acd49288194374218e33e825816ce">flashpage_read</a> (unsigned page, void *data)</td></tr>
<tr class="memdesc:gae25acd49288194374218e33e825816ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the given page into the given memory location.  <a href="#gae25acd49288194374218e33e825816ce">More...</a><br /></td></tr>
<tr class="separator:gae25acd49288194374218e33e825816ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga250699abc5f5c7df1d40262c973eea19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga250699abc5f5c7df1d40262c973eea19">flashpage_verify</a> (unsigned page, const void *data)</td></tr>
<tr class="memdesc:ga250699abc5f5c7df1d40262c973eea19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify the given page against the given data.  <a href="#ga250699abc5f5c7df1d40262c973eea19">More...</a><br /></td></tr>
<tr class="separator:ga250699abc5f5c7df1d40262c973eea19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga143664fd0a10dac463c9856d4a036174"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__drivers__periph__flashpage.html#ga143664fd0a10dac463c9856d4a036174">flashpage_write_and_verify</a> (unsigned page, const void *data)</td></tr>
<tr class="memdesc:ga143664fd0a10dac463c9856d4a036174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the given page and verify the results.  <a href="#ga143664fd0a10dac463c9856d4a036174">More...</a><br /></td></tr>
<tr class="separator:ga143664fd0a10dac463c9856d4a036174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga951d0ea82c1cd088012f04eaa4190fa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga951d0ea82c1cd088012f04eaa4190fa8">&#9670;&nbsp;</a></span>FLASH_WRITABLE_INIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_WRITABLE_INIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">__attribute__((aligned(<a class="code" href="cc2538_2include_2cpu__conf_8h.html#afce96cb577e50c76434ba92363ca20e8">FLASHPAGE_SIZE</a>))) \</div><div class="line">    __attribute__((section(<span class="stringliteral">&quot;.flash_writable.&quot;</span> #name))) \</div><div class="line">    static <span class="keyword">const</span> uint8_t name [size * <a class="code" href="cc2538_2include_2cpu__conf_8h.html#afce96cb577e50c76434ba92363ca20e8">FLASHPAGE_SIZE</a>]</div><div class="ttc" id="cc2538_2include_2cpu__conf_8h_html_afce96cb577e50c76434ba92363ca20e8"><div class="ttname"><a href="cc2538_2include_2cpu__conf_8h.html#afce96cb577e50c76434ba92363ca20e8">FLASHPAGE_SIZE</a></div><div class="ttdeci">#define FLASHPAGE_SIZE</div><div class="ttdoc">Flash page configuration. </div><div class="ttdef"><b>Definition:</b> <a href="cc2538_2include_2cpu__conf_8h_source.html#l00050">cpu_conf.h:50</a></div></div>
</div><!-- fragment -->
<p>Define an array in flash memory. </p>
<p>This macro defines an array stored in the ".flash_writable" section which is part of flash memory. With this macro it is possible to reserve flash memory at build time.</p>
<p>E.g. <a class="el" href="group__drivers__periph__flashpage.html#ga951d0ea82c1cd088012f04eaa4190fa8" title="Define an array in flash memory. ">FLASH_WRITABLE_INIT(a, 2)</a>; will create a array with name 'a' of size 2 * <a class="el" href="group__cpu__nrf9160.html#gafce96cb577e50c76434ba92363ca20e8">FLASHPAGE_SIZE</a> which is stored in flash memory and takes up 2 flash pages.</p>
<p>Symbols created by using this macro are sorted in ascending order by name. Therefore, &amp;a &lt; &amp;b where a and b are arrays created using this macro.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of the array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>size of the array in unit of <a class="el" href="group__cpu__nrf9160.html#gafce96cb577e50c76434ba92363ca20e8">FLASHPAGE_SIZE</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00173">173</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<a id="ga72c89204ecbd5efc8d52d3bd73003a28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72c89204ecbd5efc8d52d3bd73003a28">&#9670;&nbsp;</a></span>FLASHPAGE_WRITE_BLOCK_ALIGNMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASHPAGE_WRITE_BLOCK_ALIGNMENT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The buffers to be written to the flash MUST be aligned, as well as the address on which the buffer is written to the flash. </p>
<p>This variable must be defined for that purpose, according to the MCU align requirements. </p>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00086">86</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<a id="ga8571c7ea34cc4acdf5a035b72c1e9f12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8571c7ea34cc4acdf5a035b72c1e9f12">&#9670;&nbsp;</a></span>PERIPH_FLASHPAGE_CUSTOM_PAGESIZES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PERIPH_FLASHPAGE_CUSTOM_PAGESIZES</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defined to signal that the peripheral has non-uniform flash page sizes. </p>
<p>These devices do not define FLASHPAGE_SIZE and do not implement the pagewise api. </p>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00106">106</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga2ed332df4696233768771e93d4081c3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2ed332df4696233768771e93d4081c3f">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return values used in this interface. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga2ed332df4696233768771e93d4081c3fabbfd3aff1792ce2d3654c849684ee52b"></a>FLASHPAGE_OK&#160;</td><td class="fielddoc"><p>everything succeeded </p>
</td></tr>
<tr><td class="fieldname"><a id="gga2ed332df4696233768771e93d4081c3fa5b88341d18672e0b3ad3b34e6b9ffd90"></a>FLASHPAGE_NOMATCH&#160;</td><td class="fielddoc"><p>page differs from target data </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00136">136</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab2fa8e81e8c623f72436cdb0f860f36f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab2fa8e81e8c623f72436cdb0f860f36f">&#9670;&nbsp;</a></span>flashpage_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* flashpage_addr </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translate the given page number into the page's starting address. </p>
<dl class="section note"><dt>Note</dt><dd>The given page MUST be valid, otherwise the returned address points to an undefined memory location!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>page number to get the address of</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>starting memory address of the given page </dd></dl>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00202">202</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<a id="ga52f96ad7308632eecf400fce6230c1ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52f96ad7308632eecf400fce6230c1ca">&#9670;&nbsp;</a></span>flashpage_erase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flashpage_erase </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erase the given page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>Page to erase </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac95d86b4e651d7b5c75354aad5701206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac95d86b4e651d7b5c75354aad5701206">&#9670;&nbsp;</a></span>flashpage_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned flashpage_page </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translate the given address into the corresponding page number. </p>
<p>The given address can be any address inside a page.</p>
<dl class="section note"><dt>Note</dt><dd>The given address MUST be a valid flash address!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>address inside the targeted page</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>page containing the given address </dd></dl>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00218">218</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<a id="gae25acd49288194374218e33e825816ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae25acd49288194374218e33e825816ce">&#9670;&nbsp;</a></span>flashpage_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flashpage_read </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the given page into the given memory location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>page to read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>memory to write the page to, MUST be FLASHPAGE_SIZE byte </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaae77fe2e674ff139e0cad902cad3f19f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae77fe2e674ff139e0cad902cad3f19f">&#9670;&nbsp;</a></span>flashpage_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t flashpage_size </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the page size of the given page number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>page number to get the size for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Page size of the given page </dd></dl>

<p class="definition">Definition at line <a class="el" href="flashpage_8h_source.html#l00186">186</a> of file <a class="el" href="flashpage_8h_source.html">flashpage.h</a>.</p>

</div>
</div>
<a id="ga250699abc5f5c7df1d40262c973eea19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga250699abc5f5c7df1d40262c973eea19">&#9670;&nbsp;</a></span>flashpage_verify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int flashpage_verify </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify the given page against the given data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>page to verify </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>data to compare page against, MUST be FLASHPAGE_SIZE byte of data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FLASHPAGE_OK if data in the page is identical to <code>data</code> </dd>
<dd>
FLASHPAGE_NOMATCH if data and page content diverge </dd></dl>

</div>
</div>
<a id="gab3889412c4191fb47743f00407329a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3889412c4191fb47743f00407329a90">&#9670;&nbsp;</a></span>flashpage_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flashpage_write </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>target_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write any number of data bytes to a given location in the flash memory. </p>
<dl class="section warning"><dt>Warning</dt><dd>Make sure the targeted memory area is erased before calling this function</dd></dl>
<p>Both target address and data address must be aligned to FLASHPAGE_BLOCK_ALIGN. <code>len</code> must be a multiple of FLASHPAGE_WRITE_BLOCK_SIZE. This function doesn't erase any area in flash, thus be sure the targeted memory area is erased before writing on it (using the flashpage_write function).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">target_addr</td><td>address in flash to write to. MUST be aligned to FLASHPAGE_WRITE_BLOCK_ALIGNMENT. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>data to write to the address. MUST be aligned to FLASHPAGE_WRITE_BLOCK_ALIGNMENT. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of the data to be written. It MUST be multiple of FLASHPAGE_WRITE_BLOCK_SIZE. Also, ensure it doesn't exceed the actual flash memory size. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga143664fd0a10dac463c9856d4a036174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga143664fd0a10dac463c9856d4a036174">&#9670;&nbsp;</a></span>flashpage_write_and_verify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int flashpage_write_and_verify </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the given page and verify the results. </p>
<p>This is a convenience function wrapping flashpage_write and flashpage_verify.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>page to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>data to write to the page, MUST be FLASHPAGE_SIZE byte.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FLASHPAGE_OK on success </dd>
<dd>
FLASHPAGE_NOMATCH if data and page content diverge </dd></dl>

</div>
</div>
<a id="gaf894a3072f60d91d76ada0d68e848102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf894a3072f60d91d76ada0d68e848102">&#9670;&nbsp;</a></span>flashpage_write_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flashpage_write_page </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the given page with the given data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>page to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>data to write to the page, MUST be FLASHPAGE_SIZE byte. Set to NULL for page erase only. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Thu Mar 13 2025 10:38:33 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
