<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>TinyUSB package</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right" action="https://duckduckgo.com/" method="get">
                 <input type="hidden" name="sites" value="doc.riot-os.org"/>
                 <input type="hidden" name="kt" value="h"/>
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" name="q" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__pkg__tinyusb.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">TinyUSB package<div class="ingroups"><a class="el" href="group__pkg.html">Packages</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides the tinyUSB stack as package.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provides the tinyUSB stack as package. </p>
<dl class="section author"><dt>Author</dt><dd>Gunar Schorcht <a href="#" onclick="location.href='mai'+'lto:'+'gun'+'ar'+'@sc'+'ho'+'rch'+'t.'+'net'; return false;">gunar<span style="display: none;">.nosp@m.</span>@sch<span style="display: none;">.nosp@m.</span>orcht<span style="display: none;">.nosp@m.</span>.net</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/hathach/tinyusb">https://github.com/hathach/tinyusb</a></dd></dl>
<h1><a class="anchor" id="pkg_tinyusb"></a>
TinyUSB</h1>
<p>tinyUSB is an open-source cross-platform USB Host/Device stack for embedded systems.</p>
<dl class="section note"><dt>Note</dt><dd>This package is distinct from (and incompatible with) the USB stack provided around USBUS in RIOT (see <a class="el" href="group__usb.html">USB</a>). They differ in the level of abstraction and in the set of supported devices.</dd></dl>
<h1><a class="anchor" id="autotoc_md1943"></a>
Usage</h1>
<p>Add the following entries to your application makefile:</p><ul>
<li>Enable tinyUSB package <div class="fragment"><div class="line">USEPKG += tinyusb</div></div><!-- fragment --></li>
<li>Select whether to use the tinyUSB device stack or the tinyUSB host stack or both: <div class="fragment"><div class="line">USEMODULE += tinyusb_device</div></div><!-- fragment --></li>
<li>Select the device/host classes to be used, for example: <div class="fragment"><div class="line">USEMODULE += tinyusb_class_cdc tinyusb_class_msc</div></div><!-- fragment --></li>
</ul>
<p>Either add <code><a class="el" href="tinyusb_8h.html#a0c04305ad9d156824dd92035c55102ba" title="Initialize the tinyUSB stack including used peripherals and start the tinyUSB thread. ">tinyusb_setup()</a></code> to your main function to explicitly initialize the tinyUSB stack including the used peripherals and start the tinyUSB thread, or use the <code>auto_init</code> module (<b>default</b>).</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="comment">// If auto-initialization is not used (module `auto_init`),</span></div><div class="line">    <span class="comment">// initialize the tinyUSB stack including used peripherals and</span></div><div class="line">    <span class="comment">// start the tinyUSB thread. Auto-initialization is used by default.</span></div><div class="line">    <a class="code" href="tinyusb_8h.html#a0c04305ad9d156824dd92035c55102ba">tinyusb_setup</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (1) {</div><div class="line">        ...</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>If it is necessary to override the default configuration defined in <code><a class="el" href="tusb__config_8h.html" title="TinyUSB default configurations. ">tusb_config.h</a></code>, create a file <code>tinyusb_app_config.h</code> in your application directory and override the configuration to be changed. </p><div class="fragment"><div class="line"><span class="preprocessor">#define CONFIG_TUSBD_CDC_NUMOF   2</span></div></div><!-- fragment --><p>By default, the number of <code>CONFIG_TUSBD_*_NUMOF</code> device class and <code>CONFIG_TUSBH_*_NUMOF</code> host class interfaces are defined to 1 if the corresponding <code>tinyusb_class_*</code> and <code>tinyusb_device</code>/<code>tinyusb_host</code> module are enabled, and 0 otherwise. That is, there is one interface of each class.</p>
<p>For example, if the <code>tinyusb_device</code> and <code>tinyusb_class_cdc</code> modules are enabled, <code>CONFIG_TUSBD_CDC_NUMOF</code> is defined to 1 by default. The number of all other <code>CONFIG_TUSBD_*_NUMOF</code> device class interfaces are 0.</p>
<p>If you add the <code>tinyusb_app_config.h</code> file in your application directory to override the default configuration, add the application path to the include paths at the end of your application's Makefile. This is necessary so that the tinyUSB stack uses the file <code>tinyusb_app_config.h</code> from your application directory and thus the file <code><a class="el" href="tusb__config_8h.html" title="TinyUSB default configurations. ">tusb_config.h</a></code> from the tinyUSB package. </p><div class="fragment"><div class="line">USEPKG += tinyusb</div><div class="line">USEMODULE += tinyusb_class_cdc</div><div class="line">USEMODULE += tinyusb_class_msc</div><div class="line">USEMODULE += tinyusb_device</div><div class="line"></div><div class="line">include $(RIOTBASE)/Makefile.include</div><div class="line"></div><div class="line">INCLUDES += -I$(APPDIR)</div></div><!-- fragment --><p>Implement the callbacks of the enabled classes.</p>
<p>For most common device classes and their configuration, the tinyUSB package automatically generates the required descriptors and descriptor callbacks for any combination of</p><ul>
<li>up to two interfaces of the class CDC ACM,</li>
<li>up to two interfaces of the Generic In/Out HID class,</li>
<li>up to one DFU interface</li>
<li>up to one MSC device interface and,</li>
<li>up to one Net device interface with CDC ECM, CDC NCM and RNDIS protocol, and</li>
<li>up to one interface of the Vendor device class.</li>
</ul>
<p>Any other combination, either a different number of these device class interfaces or the use of a different device class interface, requires the implementation of custom descriptors and the callbacks.</p>
<p>All symbols of the generated descriptors and their callback functions are defined as weak symbols so that the application can override parts of the descriptors or the callback functions that handle them. For example, the array <code>tusb_desc_hid_0_report</code>, which defines the HID report descriptor for HID device 0, making the device a generic in/out HID device</p>
<div class="fragment"><div class="line">__attribute__((weak))</div><div class="line">uint8_t <span class="keyword">const</span> tusb_desc_hid_0_report[] =</div><div class="line">{</div><div class="line">    TUD_HID_REPORT_DESC_GENERIC_INOUT(CONFIG_TUSBD_HID_EP_SIZE),</div><div class="line">};</div></div><!-- fragment --><p>could be overridden by the application with</p>
<div class="fragment"><div class="line">uint8_t <span class="keyword">const</span> tusb_desc_hid_0_report[] =</div><div class="line">{</div><div class="line">    TUD_HID_REPORT_DESC_KEYBOARD(HID_REPORT_ID(REPORT_ID_KEYBOARD)),</div><div class="line">    TUD_HID_REPORT_DESC_MOUSE(HID_REPORT_ID(REPORT_ID_MOUSE)),</div><div class="line">};</div></div><!-- fragment --><p>to make the device to be a composite keyboard/mouse device.</p>
<p>Please refer <code>$RIOTBASE/tests/pkg/tinyusb_cdc_msc</code> and the <a href="https://docs.tinyusb.org/en/latest/reference/getting_started.html">tinyUSB documentation</a> for details. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__pkg__tinyusb__netdev"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pkg__tinyusb__netdev.html">TinyUSB netdev driver</a></td></tr>
<tr class="memdesc:group__pkg__tinyusb__netdev"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB netdev driver for CDC ECM, CDC NCM and RNDIS protocol. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__pkg__tinyusb__dfu"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pkg__tinyusb__dfu.html">riotboot tinyUSB DFU</a></td></tr>
<tr class="memdesc:group__pkg__tinyusb__dfu"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br />
<h1><a class="anchor" id="autotoc_md1624"></a>
Overview</h1>
<br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:cpu_2stm32_2include_2tinyusb__hw__defaults_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cpu_2stm32_2include_2tinyusb__hw__defaults_8h.html">tinyusb_hw_defaults.h</a></td></tr>
<tr class="memdesc:cpu_2stm32_2include_2tinyusb__hw__defaults_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">STM32 specific default configurations for tinyUSB. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:tinyusb_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinyusb_8h.html">tinyusb.h</a></td></tr>
<tr class="memdesc:tinyusb_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:tinyusb__descriptors_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinyusb__descriptors_8h.html">tinyusb_descriptors.h</a></td></tr>
<tr class="memdesc:tinyusb__descriptors_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB commonn descriptor implementation. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:tusb__config_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tusb__config_8h.html">tusb_config.h</a></td></tr>
<tr class="memdesc:tusb__config_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB default configurations. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:tusb__os__custom_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tusb__os__custom_8h.html">tusb_os_custom.h</a></td></tr>
<tr class="memdesc:tusb__os__custom_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB OS Abstraction Layer for RIOT. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:tinyusb__hw_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tinyusb__hw_8h.html">tinyusb_hw.h</a></td></tr>
<tr class="memdesc:tinyusb__hw_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">TinyUSB hardware driver API. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:pkg_2tinyusb_2hw_2include_2tinyusb__hw__defaults_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pkg_2tinyusb_2hw_2include_2tinyusb__hw__defaults_8h.html">tinyusb_hw_defaults.h</a></td></tr>
<tr class="memdesc:pkg_2tinyusb_2hw_2include_2tinyusb__hw__defaults_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hardware specific default configurations for tinyUSB. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Wed Mar 12 2025 10:21:32 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.14</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
